<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Jenkins + Fastlane + è’²å…¬è‹± + iOS è‡ªåŠ¨åŒ–æ„å»º</title>
    <link href="/2020/10/26/Jenkins%20+%20Fastlane%20+%20%E8%92%B2%E5%85%AC%E8%8B%B1%20+%20iOS%20%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA/"/>
    <url>/2020/10/26/Jenkins%20+%20Fastlane%20+%20%E8%92%B2%E5%85%AC%E8%8B%B1%20+%20iOS%20%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/MaricleZhang/reasource/blob/master/jenkins_fastlane.png?raw=true" alt="jenkins_fastlane"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºåœ¨é¡¹ç›®çš„æµ‹è¯•é˜¶æ®µï¼Œä¸ºäº†å¿«é€Ÿçš„æµ‹è¯•éœ€è¦é¢‘ç¹çš„æ‰“åŒ…å‘å¸ƒï¼Œä¼šè€—è´¹å¾ˆå¤šçš„æ—¶é—´ã€‚è€Œä¸”éœ€è¦è‡ªå·±æ‰‹åŠ¨å»é…ç½®å¾ˆå¤šè¯ä¹¦å’Œç¯å¢ƒï¼Œåœ¨æ¯æ¬¡ç­‰å¾…éƒ½å¤‡å—ç…ç†¬ï¼Œä¸ºäº†ä»è¿™ç§æŠ˜ç£¨ä¸­è„±ç¦»è€Œå‡ºï¼Œä¾¿è€ƒè™‘ä½¿ç”¨æŒç»­åŒ–é›†æˆæ¥è¿›è¡Œè‡ªåŠ¨æ‰“åŒ…ã€‚</p><p>æŒç»­é›†æˆæ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µï¼Œå³å›¢é˜Ÿå¼€å‘æˆå‘˜ç»å¸¸é›†æˆä»–ä»¬çš„å·¥ä½œï¼Œé€šå¸¸æ¯ä¸ªæˆå‘˜æ¯å¤©è‡³å°‘é›†æˆä¸€æ¬¡ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯å¤©å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡é›†æˆã€‚æ¯æ¬¡é›†æˆéƒ½é€šè¿‡è‡ªåŠ¨åŒ–çš„æ„å»ºï¼ˆåŒ…æ‹¬ç¼–è¯‘ï¼Œå‘å¸ƒï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰æ¥éªŒè¯ï¼Œä»è€Œå°½æ—©åœ°å‘ç°é›†æˆé”™è¯¯ã€‚</p><p>ç›®å‰æ¯”è¾ƒæµè¡Œçš„è‡ªåŠ¨åŒ–æµç¨‹å·¥å…·æ˜¯Fastlaneï¼ŒFastlaneæ˜¯ç”¨Rubyè¯­è¨€ç¼–å†™çš„ä¸€å¥—è‡ªåŠ¨åŒ–å·¥å…·é›†å’Œæ¡†æ¶ï¼Œæ¯ä¸€ä¸ªå·¥å…·å®é™…éƒ½å¯¹åº”ä¸€ä¸ªRubyè„šæœ¬ï¼Œç”¨æ¥æ‰§è¡ŒæŸä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼Œè€ŒFastlaneæ ¸å¿ƒæ¡†æ¶åˆ™å…è®¸ä½¿ç”¨è€…é€šè¿‡ç±»ä¼¼é…ç½®æ–‡ä»¶çš„å½¢å¼ï¼Œå°†ä¸åŒçš„å·¥å…·æœ‰æœºè€Œçµæ´»çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œä»è€Œå½¢æˆä¸€ä¸ªä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒFastlaneçš„å·¥å…·é›†åŸºæœ¬ä¸Šæ¶µç›–äº†æ‰“åŒ…ï¼Œç­¾åï¼Œæµ‹è¯•ï¼Œéƒ¨ç½²ï¼Œå‘å¸ƒï¼Œåº“ç®¡ç†ç­‰ç­‰ç§»åŠ¨å¼€å‘ä¸­æ¶‰åŠåˆ°çš„å†…å®¹ã€‚</p><h2 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h2><h3 id="Jenkinså®‰è£…"><a href="#Jenkinså®‰è£…" class="headerlink" title="Jenkinså®‰è£…"></a>Jenkinså®‰è£…</h3><pre><code class="hljs mipsasm"><span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span><span class="hljs-keyword">jenkins</span></code></pre><h3 id="Jenkins-å¸¸ç”¨å‘½ä»¤"><a href="#Jenkins-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Jenkins å¸¸ç”¨å‘½ä»¤"></a>Jenkins å¸¸ç”¨å‘½ä»¤</h3><pre><code class="hljs mipsasm"><span class="hljs-comment">#å¯åŠ¨jenkins</span><span class="hljs-keyword">brew </span>services start <span class="hljs-keyword">jenkins</span><span class="hljs-keyword">#åœæ­¢jenkins </span><span class="hljs-keyword">brew </span>services stop <span class="hljs-keyword">jenkins</span><span class="hljs-keyword">#é‡å¯jenkins</span><span class="hljs-keyword">brew </span>services restart <span class="hljs-keyword">jenkins</span><span class="hljs-keyword">#ç›´æ¥å¯åŠ¨jenkins</span><span class="hljs-keyword">jenkins</span></code></pre><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥localhost:8080,å»ç›¸å…³è·¯å¾„æ‰¾åˆ°å¯†ç å¤åˆ¶è¿›å»å³å¯</p><h3 id="æ–°å»ºä»»åŠ¡"><a href="#æ–°å»ºä»»åŠ¡" class="headerlink" title="æ–°å»ºä»»åŠ¡"></a>æ–°å»ºä»»åŠ¡</h3><p>ç‚¹å‡» New Itemï¼Œé€‰æ‹©FreeStyle project,è¿›å…¥åˆ°ä»»åŠ¡é…ç½®ç•Œé¢</p><p><img src="https://github.com/MaricleZhang/reasource/blob/master/create_jenkins_manager.png?raw=true" alt="jenkins_config"></p><h3 id="jenkins-é…ç½®"><a href="#jenkins-é…ç½®" class="headerlink" title="jenkins é…ç½®"></a>jenkins é…ç½®</h3><h4 id="å®‰è£…Git-å‚æ•°æ’ä»¶"><a href="#å®‰è£…Git-å‚æ•°æ’ä»¶" class="headerlink" title="å®‰è£…Git å‚æ•°æ’ä»¶"></a>å®‰è£…Git å‚æ•°æ’ä»¶</h4><ol><li><p>Manage Jenkins -&gt; Plugin Manager -&gt;Git Parameter,å®‰è£…å®Œæˆé‡å¯jenkinsï¼Œè¿›å…¥ä»»åŠ¡é…ç½®ç•Œé¢ï¼Œé€‰æ‹©â€œæºç ç®¡ç†â€ä¸­çš„Gité€‰é¡¹,è¾“å…¥gitåœ°å€<br><img src="https://github.com/MaricleZhang/reasource/blob/master/git_source_manage.png?raw=true" alt="git_source_config"></p></li><li><p>æ·»åŠ å‡­è¯(Credentialsï¼‰ï¼Œè¾“å…¥gitçš„è´¦å·å¯†ç </p></li><li><p>é…ç½®gitçš„é€‰æ‹©å‚æ•°ï¼ˆå¦‚æœä¸è®¾ç½®è¯¥æ­¥éª¤ï¼Œé»˜è®¤é€‰æ‹©masteråˆ†æ”¯æ‰§è¡Œï¼‰é€‰ä¸­<code>This project is parameterized</code>æŒ‰ç…§ä¸‹å›¾è¾“å…¥,å…¶ä¸­branchä¸ºè‡ªå®šä¹‰å‚æ•°<br><img src="https://github.com/MaricleZhang/reasource/blob/master/select_git_paramer.png?raw=true" alt="select_git_paramer"></p></li></ol><p>åœ¨ä¸‹é¢Source Code Management ä¸­ä½¿ç”¨<code>$&#123;branch&#125;</code> å¦‚ä¸‹å›¾ï¼Œç‚¹å‡»Applyã€‚<br><img src="https://github.com/MaricleZhang/reasource/blob/master/set_git_brach.png?raw=true" alt="set_git_brach"></p><p>è¿›å…¥è¯¥ä»»åŠ¡ç•Œé¢,å¦‚ä¸‹å›¾è¯´æ˜é…ç½®æˆåŠŸ</p><p><img src="https://github.com/MaricleZhang/reasource/blob/master/build_with_parameters.png?raw=true" alt="build_with_parameters"></p><h4 id="jenkins-æ‰§è¡Œè„šæœ¬"><a href="#jenkins-æ‰§è¡Œè„šæœ¬" class="headerlink" title="jenkins æ‰§è¡Œè„šæœ¬"></a>jenkins æ‰§è¡Œè„šæœ¬</h4><h5 id="ç¼–è¯‘æ‰“åŒ…"><a href="#ç¼–è¯‘æ‰“åŒ…" class="headerlink" title="ç¼–è¯‘æ‰“åŒ…"></a>ç¼–è¯‘æ‰“åŒ…</h5><pre><code class="hljs routeros"><span class="hljs-builtin-name">export</span> <span class="hljs-attribute">MallocNanoZone</span>=0 <span class="hljs-builtin-name">export</span> <span class="hljs-attribute">LC_ALL</span>=en_us.UTF-8 cd <span class="hljs-variable">$&#123;JENKINS_HOME&#125;</span>/workspace/<span class="hljs-variable">$&#123;JOB_NAME&#125;</span> #è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹pod update --verbose  # Pod ä¾èµ–fastlane development # fastlane è‡ªå®šä¹‰å‘½ä»¤</code></pre><h5 id="ä¸Šä¼ åˆ°è’²å…¬è‹±"><a href="#ä¸Šä¼ åˆ°è’²å…¬è‹±" class="headerlink" title="ä¸Šä¼ åˆ°è’²å…¬è‹±"></a>ä¸Šä¼ åˆ°è’²å…¬è‹±</h5><pre><code class="hljs gradle">curl -F <span class="hljs-keyword">file</span>=@<span class="hljs-regexp">/Users/</span>zhangjian<span class="hljs-regexp">/.jenkins/</span>workspace<span class="hljs-regexp">/JUApp-iOS/</span>JUApp<span class="hljs-regexp">/build/</span>JuApp.ipa -F buildInstallType=<span class="hljs-number">2</span> -F buildPassword=<span class="hljs-number">666</span> -F uKey=<span class="hljs-number">378617</span>fba86912d68ddeda10fa9fbfc2 -F _api_key=<span class="hljs-number">1</span>e9896673dc767184f8e3e2f8450a45f http:<span class="hljs-comment">//www.pgyer.com/apiv2/app/upload -X POST -H &quot;enctype:multipart/form-data&quot; &gt; /tmp/upload_app.txt</span>url=$(cat <span class="hljs-regexp">/tmp/u</span>pload_app.txt|awk -F<span class="hljs-string">&#x27;&quot;&#x27;</span> <span class="hljs-string">&#x27;&#123;print $(NF-1)&#125;&#x27;</span>|sed <span class="hljs-string">&#x27;s#\\##g&#x27;</span>)echo <span class="hljs-string">&quot;download_URL:&lt;img src=$url&gt;&quot;</span></code></pre><h2 id="Fastlane"><a href="#Fastlane" class="headerlink" title="Fastlane"></a>Fastlane</h2><h3 id="Fastlane-å®‰è£…"><a href="#Fastlane-å®‰è£…" class="headerlink" title="Fastlane å®‰è£…"></a>Fastlane å®‰è£…</h3><p>é€‰æ‹©xcode</p> <pre><code class="hljs ada">xcode-<span class="hljs-keyword">select</span> <span class="hljs-comment">--install</span></code></pre><p> å®‰è£…Fastlane</p> <pre><code class="hljs cmake">sudo gem <span class="hljs-keyword">install</span> fastlane -NV</code></pre><h3 id="åˆå§‹åŒ–Fastlane"><a href="#åˆå§‹åŒ–Fastlane" class="headerlink" title="åˆå§‹åŒ–Fastlane"></a>åˆå§‹åŒ–Fastlane</h3><p> è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ</p> <pre><code class="hljs csharp">fastlane <span class="hljs-keyword">init</span></code></pre><p> å‡ºç°ä¸‹é¢4ä¸ªé€‰é¡¹,é€‰æ‹©4.è‡ªåŠ¨æ‰§è¡Œ<code>bundle update</code>éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´</p> <pre><code class="hljs angelscript"><span class="hljs-number">1.</span>  ğŸ“¸  Automate screenshots <span class="hljs-comment">//è‡ªåŠ¨æˆªå±</span><span class="hljs-number">2.</span> ğŸ‘©â€âœˆï¸  Automate beta distribution to TestFlight <span class="hljs-comment">//å‘å¸ƒåˆ°TestFlight</span><span class="hljs-number">3.</span> ğŸš€  Automate App Store distribution <span class="hljs-comment">//App Store</span><span class="hljs-number">4.</span> ğŸ›   Manual setup - manually setup your project to <span class="hljs-built_in">auto</span>mate your tasks <span class="hljs-comment">//è‡ªå®šä¹‰é…ç½®</span></code></pre><p> æ‰§è¡Œå®Œæ¯•åä¼šå‡ºç°fastlaneæ–‡ä»¶å¤¹ï¼Œæœ‰ä¸¤ä¸ªæ–‡ä»¶Appfileå’ŒFastfileã€‚<br> Appfile é…ç½®apple id</p><pre><code class="hljs shell"><span class="hljs-meta"> #</span><span class="bash"> app_identifier(<span class="hljs-string">&quot;[[APP_IDENTIFIER]]&quot;</span>) <span class="hljs-comment"># The bundle identifier of your app</span></span><span class="hljs-meta">#</span><span class="bash"> apple_id(<span class="hljs-string">&quot;[[APPLE_ID]]&quot;</span>) <span class="hljs-comment"># Your Apple email address</span></span><span class="hljs-meta">#</span><span class="bash"> For more information about the Appfile, see:</span><span class="hljs-meta">#</span><span class="bash">     https://docs.fastlane.tools/advanced/<span class="hljs-comment">#appfile</span></span></code></pre><h3 id="é…ç½®Fastlane-æ‰§è¡Œå‘½ä»¤"><a href="#é…ç½®Fastlane-æ‰§è¡Œå‘½ä»¤" class="headerlink" title="é…ç½®Fastlane æ‰§è¡Œå‘½ä»¤"></a>é…ç½®Fastlane æ‰§è¡Œå‘½ä»¤</h3><pre><code class="hljs ruby">default_platform(<span class="hljs-symbol">:ios</span>)platform <span class="hljs-symbol">:ios</span> <span class="hljs-keyword">do</span>  desc <span class="hljs-string">&quot;Description of what the lane does&quot;</span>  lane <span class="hljs-symbol">:custom_lane</span> <span class="hljs-keyword">do</span>    <span class="hljs-comment"># add actions here: https://docs.fastlane.tools/actions</span>  <span class="hljs-keyword">end</span>  desc <span class="hljs-string">&quot;æ‰“developmentåŒ…&quot;</span>  lane <span class="hljs-symbol">:development</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|options|</span>    clear_derived_data(<span class="hljs-symbol">derived_data_path:</span> <span class="hljs-string">&quot;./DerivedData&quot;</span>) <span class="hljs-comment"># æ¸…é™¤æœ¬åœ°ç¼–è¯‘ç¼“å­˜</span>    match(<span class="hljs-symbol">type:</span> <span class="hljs-string">&quot;development&quot;</span>, <span class="hljs-symbol">force_for_new_devices:</span> <span class="hljs-literal">false</span>, <span class="hljs-symbol">readonly:</span> <span class="hljs-literal">true</span>) <span class="hljs-comment"># fastlane match ç®¡ç†è¯ä¹¦</span>    gym(<span class="hljs-symbol">scheme:</span> <span class="hljs-string">&quot;FastlaneDemo&quot;</span>,      <span class="hljs-symbol">workspace:</span> <span class="hljs-string">&quot;FastlaneDemo.xcworkspace&quot;</span>,      <span class="hljs-symbol">configuration:</span> <span class="hljs-string">&quot;Debug&quot;</span>,      <span class="hljs-symbol">export_method:</span> <span class="hljs-string">&quot;development&quot;</span>,<span class="hljs-comment">#æ‰“åŒ…çš„ç±»å‹</span>      <span class="hljs-symbol">output_directory:</span> <span class="hljs-string">&quot;./build&quot;</span>,<span class="hljs-comment">#ç”Ÿæˆçš„ipaè·¯å¾„</span>      <span class="hljs-symbol">output_name:</span> <span class="hljs-string">&quot;FastlaneDemo.ipa&quot;</span>,<span class="hljs-comment">#ç”Ÿæˆçš„ipaæ–‡ä»¶å</span>      <span class="hljs-symbol">silent:</span> <span class="hljs-literal">false</span>,      <span class="hljs-symbol">include_symbols:</span> <span class="hljs-literal">true</span>,<span class="hljs-comment"># æ˜¯å¦åŒ…å«ç¬¦å·è¡¨</span>      <span class="hljs-symbol">derived_data_path:</span> <span class="hljs-string">&quot;./DerivedData&quot;</span>,      <span class="hljs-comment"># clean:true,</span>      <span class="hljs-symbol">xcargs:</span> <span class="hljs-string">&quot;-UseNewBuildSystem=NO&quot;</span>  )  <span class="hljs-keyword">end</span><span class="hljs-keyword">end</span></code></pre><h2 id="ä¼˜åŒ–åŠŸèƒ½"><a href="#ä¼˜åŒ–åŠŸèƒ½" class="headerlink" title="ä¼˜åŒ–åŠŸèƒ½"></a>ä¼˜åŒ–åŠŸèƒ½</h2><h3 id="ç”ŸæˆäºŒç»´ç "><a href="#ç”ŸæˆäºŒç»´ç " class="headerlink" title="ç”ŸæˆäºŒç»´ç "></a>ç”ŸæˆäºŒç»´ç </h3><p>æŠŠäºŒç»´ç æ˜¾ç¤ºåœ¨é¦–é¡µä¸­ï¼Œéœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶description setter plugin  æ­¥éª¤:Manage Jenkins -&gt; Plugin Manager-&gt;é€‰æ‹©description setter plugin,å®‰è£…å®Œæˆååœ¨é¡¹ç›®é…ç½®ä¸­Post-build Actions -&gt;Regular expression æ·»åŠ </p><pre><code class="hljs avrasm"><span class="hljs-symbol">download_URL:</span>(.*)</code></pre><p>å¦‚ä¸‹å›¾è¯´æ˜é…ç½®æˆåŠŸ</p><p><img src="https://github.com/MaricleZhang/reasource/blob/master/building_after_show_qr_code.png?raw=true" alt="building_after_show_qr_code"></p><h3 id="å‘é€åˆ°é’‰é’‰ç¾¤"><a href="#å‘é€åˆ°é’‰é’‰ç¾¤" class="headerlink" title="å‘é€åˆ°é’‰é’‰ç¾¤"></a>å‘é€åˆ°é’‰é’‰ç¾¤</h3><p>Manage Jenkins -&gt; Plugin Manager å®‰è£…dingtalkæ’ä»¶,è¯¦æƒ…è¯·å‚è€ƒ<a href="https://jenkinsci.github.io/dingtalk-plugin/">jenkinsé’‰é’‰æ’ä»¶</a></p><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$dingtalk</span> == <span class="hljs-literal">true</span> ]]; <span class="hljs-keyword">then</span>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;=======================å‘é€é’‰é’‰æ¶ˆæ¯============================&quot;</span>    CHANGE_LOG=<span class="hljs-string">&#x27;&#x27;</span>  <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$gitlog</span> == <span class="hljs-literal">true</span> ]]; <span class="hljs-keyword">then</span>     CHANGE_LOG=`git <span class="hljs-built_in">log</span> --pretty=format:<span class="hljs-string">&quot;\n - %h - %an, %ar : %s&quot;</span> -5`  <span class="hljs-keyword">fi</span>    <span class="hljs-keyword">if</span> [ -z <span class="hljs-variable">$&#123;dingtalktoken&#125;</span> ]; <span class="hljs-keyword">then</span> dingtalktoken=<span class="hljs-string">&#x27;b648f77cef19500e89b8168530ab00f160dc5c2fb41b41cd19da50420fc6e7&#x27;</span>  <span class="hljs-keyword">fi</span>  POD_LOG=<span class="hljs-string">&#x27;&#x27;</span>  <span class="hljs-comment">#POD_LOG=$(cat commit_log.txt)</span>    data=<span class="hljs-string">&#x27;&#123;</span><span class="hljs-string">    &quot;msgtype&quot;: &quot;markdown&quot;,</span><span class="hljs-string">    &quot;markdown&quot;: &#123;</span><span class="hljs-string">        &quot;title&quot;: &quot;&#x27;</span><span class="hljs-variable">$&#123;JOB_NAME&#125;</span><span class="hljs-string">&#x27; iOS Appä¸‹è½½&quot;,</span><span class="hljs-string">        &quot;text&quot;: &quot;![ipaåœ°å€](&#x27;</span><span class="hljs-variable">$&#123;url&#125;</span><span class="hljs-string">&#x27;)\n ### &#x27;</span><span class="hljs-variable">$&#123;JOB_NAME&#125;</span><span class="hljs-string">&#x27;-&#x27;</span><span class="hljs-variable">$&#123;BUILD_NUMBER&#125;</span><span class="hljs-string">&#x27; \n ### &#x27;</span><span class="hljs-variable">$&#123;branch&#125;</span>åˆ†æ”¯<span class="hljs-string">&#x27; \n\n &#x27;</span>-------------<span class="hljs-string">&#x27; \n ### &#x27;</span>å¤‡æ³¨ï¼š<span class="hljs-string">&#x27;\n &#x27;</span><span class="hljs-variable">$&#123;marker&#125;</span><span class="hljs-string">&#x27; \n &#x27;</span>-------------<span class="hljs-string">&#x27; \n ### &#x27;</span>ä¸»å·¥ç¨‹ä¿®æ”¹æ—¥å¿—ï¼š<span class="hljs-string">&#x27; \n &#x27;</span><span class="hljs-variable">$&#123;CHANGE_LOG&#125;</span><span class="hljs-string">&#x27; \n &#x27;</span>-------------<span class="hljs-string">&#x27; \n &quot;</span><span class="hljs-string">    &#125;,</span><span class="hljs-string">  &#125;&#x27;</span>      curl <span class="hljs-string">&quot;https://oapi.dingtalk.com/robot/send?access_token=<span class="hljs-variable">$&#123;dingtalktoken&#125;</span>&quot;</span> -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> -d <span class="hljs-string">&#x27;&#x27;</span><span class="hljs-string">&quot;<span class="hljs-variable">$&#123;data&#125;</span>&quot;</span><span class="hljs-string">&#x27;&#x27;</span>    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$stable</span> == <span class="hljs-literal">true</span> ]]; <span class="hljs-keyword">then</span>      curl <span class="hljs-string">&quot;https://oapi.dingtalk.com/robot/send?access_token=2f61c981f16837bfcdd9883d7bed5106df8c30a08fbf2f86f6e560a45b1d45&quot;</span> -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> -d <span class="hljs-string">&#x27;&#x27;</span><span class="hljs-string">&quot;<span class="hljs-variable">$&#123;data&#125;</span>&quot;</span><span class="hljs-string">&#x27;&#x27;</span>    <span class="hljs-keyword">fi</span><span class="hljs-keyword">fi</span></code></pre><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="å‡ºç°-fastlane-command-not-found"><a href="#å‡ºç°-fastlane-command-not-found" class="headerlink" title="å‡ºç° fastlane: command not found"></a>å‡ºç° fastlane: command not found</h3><p>è¿™ä¸ªæƒ…å†µä¸€èˆ¬æ˜¯ç”±äº jenkins æ²¡æœ‰è®¾ç½®æ­£ç¡®çš„ PATHï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥</p><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span></code></pre><p>Manage Jenkins -&gt; Configure System é€‰ä¸­Environment variables åœ¨ key ä¸­å¡«å†™ PATHï¼Œåœ¨ value ä¸­å¡«å†™ç¬¬ä¸€æ­¥ä¸­è¾“å‡ºçš„ç»“æœ ä¿å­˜å³å¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/MaricleZhang/reasource/blob/master/gobal_path.png?raw=true" alt="gobal_path"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>LMForm - iOSè¡¨å•é…ç½®æ¡†æ¶</title>
    <link href="/2020/10/12/LMForm%20-%20iOS%E8%A1%A8%E5%8D%95%E9%85%8D%E7%BD%AE%E6%A1%86%E6%9E%B6/"/>
    <url>/2020/10/12/LMForm%20-%20iOS%E8%A1%A8%E5%8D%95%E9%85%8D%E7%BD%AE%E6%A1%86%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>é€šå¸¸ï¼Œå°†ä¸€ä¸ªé¡µé¢éœ€è¦ç¼–è¾‘/å½•å…¥å¤šé¡¹ä¿¡æ¯çš„é¡µé¢ç§°ä¸º<strong>è¡¨å•</strong>ã€‚iOS å®ç°è¡¨å•å¤§å¤šæ•°åŸºäºTableView,éº»çƒ¦çš„æ˜¯éœ€è¦åœ¨<code>UITableViewDataSource</code>æˆ–è€…<code>UITableViewDelegate</code>çš„ä»£ç†æ–¹æ³•ä¸­å†™å¾ˆå¤š<code>if-else</code>ï¼Œä¸cellè€¦åˆä¸¥é‡,ä¸æ˜“è·å–ç”¨æˆ·å·²ç¼–è¾‘çš„æ•°æ®ã€‚å¦‚æœè¡¨å•é¡µé¢çš„é…ç½®æ•°æ®ä»æœåŠ¡ç«¯è¿”å›ï¼Œä¸æ˜“å®ç°ã€‚</p><a id="more"></a><h2 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1. ä»‹ç»"></a>1. ä»‹ç»</h2><p>LMForm æ˜¯åŸºäºMVVMè½»é‡çº§è¡¨å•é…ç½®æ¡†æ¶ï¼ŒæŠŠæ•°æ®å’Œäº‹ä»¶æ•´åˆä¸ºä¸€ä¸ªmodelï¼Œå®ç°cellä¸modelçš„ç»‘å®šï¼Œåªéœ€æ“ä½œmodelä¾¿å¯é…ç½®è¡¨å•ã€‚é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/MaricleZhang/LMForm.git">https://github.com/MaricleZhang/LMForm.git</a></p><p><img src="https://github.com/MaricleZhang/reasource/blob/master/FMForm.png?raw=true" alt="FMForm.png"></p><h2 id="2-åŠŸèƒ½"><a href="#2-åŠŸèƒ½" class="headerlink" title="2. åŠŸèƒ½"></a>2. åŠŸèƒ½</h2><ol><li>æ”¯æŒåŠ¨æ€é…ç½®modelæ¥å®ç°è¡¨å•ã€‚</li><li>æ”¯æŒé…ç½®æ–‡æœ¬ã€è¾“å…¥æ¡†ã€é€‰æ‹©å™¨ã€æ—¥æœŸé€‰æ‹©ã€åœ°å€é€‰æ‹©ç­‰ã€‚</li><li>æ”¯æŒå¿«é€Ÿæå–æ•°æ®ã€‚</li><li>æ”¯æŒæ•°æ®æ ¡éªŒï¼Œå¯è‡ªå®šä¹‰æ ¡éªŒæ ¼å¼ã€‚</li><li>æ”¯æŒå®Œå…¨è‡ªå®šä¹‰cellç±»å‹ã€‚</li></ol><h2 id="3-é¢„è§ˆ"><a href="#3-é¢„è§ˆ" class="headerlink" title="3. é¢„è§ˆ"></a>3. é¢„è§ˆ</h2><p><img src="https://github.com/MaricleZhang/reasource/blob/master/5bb1c0b2e89829cd8c70a1b5095ea8b6.gif?raw=true" alt="FMFormç¤ºä¾‹å›¾.gif"></p><h2 id="4-å®‰è£…"><a href="#4-å®‰è£…" class="headerlink" title="4. å®‰è£…"></a>4. å®‰è£…</h2><h3 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods"></a>CocoaPods</h3><p>åœ¨ Podfile ä¸­è¿›è¡Œå¦‚ä¸‹å¯¼å…¥ï¼š</p><pre><code class="hljs nginx"><span class="hljs-attribute">pod</span> <span class="hljs-string">&#x27;LMForm&#x27;</span></code></pre><p>å®‰è£…</p><pre><code class="hljs cmake">pod <span class="hljs-keyword">install</span></code></pre><h2 id="5-ä½¿ç”¨"><a href="#5-ä½¿ç”¨" class="headerlink" title="5. ä½¿ç”¨"></a>5. ä½¿ç”¨</h2><p>åœ¨é¡¹ç›®ä¸­å¯¼å…¥<code>#import &quot;LMForm.h&quot; </code></p><h3 id="1-é…ç½®æ•°æ®æº"><a href="#1-é…ç½®æ•°æ®æº" class="headerlink" title="1. é…ç½®æ•°æ®æº"></a>1. é…ç½®æ•°æ®æº</h3><p>ç›®å‰é¡¹ç›®ä¸­é›†æˆä»¥ä¸‹ç±»å‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>å®å®šä¹‰</th><th>Cell Class</th></tr></thead><tbody><tr><td>æ–‡æœ¬</td><td>kFormTypeText</td><td>LMFormCell</td></tr><tr><td>è¾“å…¥æ¡†</td><td>kFormTypeInput</td><td>LMFormInputCell</td></tr><tr><td>é€‰æ‹©å™¨</td><td>kFormTypeSelector</td><td>LMFormSelectorCell</td></tr><tr><td>æ—¥æœŸé€‰æ‹©å™¨</td><td>kFormTypeDate</td><td>LMDateCell</td></tr><tr><td>åœ°å€è¾“å…¥æ¡†</td><td>kFormTypeAddressInput</td><td>LMFormAddressInputCell</td></tr></tbody></table><p>å¯æ ¹æ®éœ€æ±‚æ¥é€‰æ‹©å¯¹åº”çš„ç±»å‹ï¼Œä¾‹å¦‚è¾“å…¥æ¡†çš„modelé…ç½®ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="hljs gams">  <span class="hljs-comment">// è¾“å…¥æ¡†</span>- (LMFormModel *)loadInput&#123;    LMFormModel *<span class="hljs-keyword">model</span> = [LMFormModel new];    <span class="hljs-keyword">model</span>.formType = kFormTypeInput;    <span class="hljs-keyword">model</span>.title = @<span class="hljs-string">&quot;æ‰‹æœºå·&quot;</span>;    <span class="hljs-keyword">model</span>.key = @<span class="hljs-string">&quot;mobile&quot;</span>;    <span class="hljs-keyword">model</span>.value = @<span class="hljs-string">&quot;&quot;</span>;    <span class="hljs-keyword">model</span>.placeholder = @<span class="hljs-string">&quot;è¯·è¾“å…¥æ‰‹æœºå·&quot;</span>;    <span class="hljs-keyword">model</span>.height = LM_XX_6(<span class="hljs-number">50</span>);    <span class="hljs-keyword">model</span>.message = @<span class="hljs-string">&quot;è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·&quot;</span>;    <span class="hljs-keyword">model</span>.limitLength = <span class="hljs-number">11</span>;    <span class="hljs-keyword">model</span>.validateBlock = ^BOOL(LMFormModel * _Nullable <span class="hljs-keyword">model</span>) &#123;        <span class="hljs-keyword">if</span> (![LMFormValidator isMobile:<span class="hljs-keyword">model</span>.value])        &#123;            [LMWindowHud showHud:<span class="hljs-keyword">model</span>.message];            return <span class="hljs-keyword">NO</span>;        &#125;        return <span class="hljs-keyword">YES</span>;    &#125;;    return <span class="hljs-keyword">model</span>;&#125;</code></pre><p>å¯æ ¹æ®éœ€è¦è®¾ç½®UIï¼Œè¾“å…¥é™åˆ¶é•¿åº¦ï¼Œè‡ªå®šä¹‰æ ¡éªŒç­‰ã€‚</p><h3 id="2-åˆ›å»ºtableview"><a href="#2-åˆ›å»ºtableview" class="headerlink" title="2. åˆ›å»ºtableview"></a>2. åˆ›å»ºtableview</h3><p>åˆ›å»ºåŸºäºLMFormTableView çš„tableviewï¼Œå¹¶ä¸”èµ‹å€¼æ¸²æŸ“æ•°æ®ï¼Œè¡¨å•çš„åˆ›å»ºå®Œæˆã€‚</p><pre><code class="hljs ini"><span class="hljs-attr">self.tableView.dataArray</span> = self.dataArray<span class="hljs-comment">;</span></code></pre><h3 id="3-æ ¡éªŒæ•°æ®"><a href="#3-æ ¡éªŒæ•°æ®" class="headerlink" title="3. æ ¡éªŒæ•°æ®"></a>3. æ ¡éªŒæ•°æ®</h3><p>æäº¤æ—¶ï¼Œå¯¹æ•°æ®æºè¿›è¡Œè‡ªå®šä¹‰æ ¡éªŒï¼Œæ ¡éªŒçš„é€»è¾‘æ˜¯å¯¹<code>model.validateBlock</code>éå†å›è°ƒã€‚</p><pre><code class="hljs objectivec"><span class="hljs-comment">/**</span><span class="hljs-comment"> å¯¹æ•°æ®æºæ ¡éªŒ</span><span class="hljs-comment"></span><span class="hljs-comment"> @param dataArray æ•°æ®æº</span><span class="hljs-comment"> @return å…¨éƒ¨æ ¡éªŒé€šè¿‡è¿”å›YESï¼Œå¦åˆ™è¿”å›NOã€‚</span><span class="hljs-comment"> */</span>+ (<span class="hljs-built_in">BOOL</span>)validateDataArray:(<span class="hljs-built_in">NSArray</span>&lt;LMFormModel *&gt; *)dataArray&#123;    <span class="hljs-keyword">for</span> (LMFormModel * _Nonnull obj <span class="hljs-keyword">in</span> dataArray)    &#123;        <span class="hljs-keyword">if</span> (obj.validateBlock)        &#123;            <span class="hljs-keyword">if</span> (!obj.validateBlock(obj)) <span class="hljs-keyword">return</span> <span class="hljs-literal">NO</span>;        &#125;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;&#125;</code></pre><h3 id="4-è·å–æ•°æ®æº"><a href="#4-è·å–æ•°æ®æº" class="headerlink" title="4. è·å–æ•°æ®æº"></a>4. è·å–æ•°æ®æº</h3><p>å› ä¸ºLMFormTableViewä¸­çš„cellä¸modelç»‘å®šï¼Œåªéœ€éå†è·å–<code>value</code>å³å¯ã€‚</p><h2 id="6-Cell-ç±»å‹çš„ä»‹ç»"><a href="#6-Cell-ç±»å‹çš„ä»‹ç»" class="headerlink" title="6. Cell ç±»å‹çš„ä»‹ç»"></a>6. Cell ç±»å‹çš„ä»‹ç»</h2><h3 id="1-LMFormCell"><a href="#1-LMFormCell" class="headerlink" title="1. LMFormCell"></a>1. LMFormCell</h3><p>åŸºç±»cell:å…¶ä»–ç±»å‹cellç»§æ‰¿è¯¥cellï¼Œä¸»è¦åŠŸèƒ½æ˜¾ç¤ºæ–‡æœ¬ï¼Œä¸å¯ç¼–è¾‘ã€‚å¯æ ¹æ®éœ€æ±‚é…ç½®ç›¸åº”UIå’Œæ•°æ®ã€‚</p><pre><code class="hljs reasonml">- (void)configModel:(LMFormModel *)model&#123;    self.model = model;        <span class="hljs-comment">// data</span>    self.titleLabel.text = model.title;    self.textField.placeholder = model.placeholder;    self.textField.text = model.value;    <span class="hljs-keyword">if</span> (model.limitLength)    &#123;        self.textField.limitLength = @(model.limitLength);    &#125;        <span class="hljs-comment">// UI</span>    self.line.hidden = model.hiddenLine;    self.line.backgroundColor = <span class="hljs-constructor">LM_ObjDefault(<span class="hljs-params">model</span>.<span class="hljs-params">separatorLineColor</span>, LM_UIColorFromHEX(0xF4F4F4)</span>);    self.titleLabel.textColor = <span class="hljs-constructor">LM_ObjDefault(<span class="hljs-params">model</span>.<span class="hljs-params">leftTextColor</span>, LM_UIColorFromHEX(0x666666)</span>);    self.textField.textColor = <span class="hljs-constructor">LM_ObjDefault(<span class="hljs-params">model</span>.<span class="hljs-params">rightTextColor</span>, LM_UIColorFromHEX(0x333333)</span>);    self.titleLabel.font = <span class="hljs-constructor">LM_ObjDefault(<span class="hljs-params">model</span>.<span class="hljs-params">leftLabelFont</span>, [UIFont <span class="hljs-params">systemFontOfSize</span>:LM_XX_6(14)</span>]);    self.titleLabel.font = <span class="hljs-constructor">LM_ObjDefault(<span class="hljs-params">model</span>.<span class="hljs-params">rightLabelFont</span>, [UIFont <span class="hljs-params">systemFontOfSize</span>:LM_XX_6(14)</span>]);&#125;</code></pre><h3 id="2-LMFormInputCell"><a href="#2-LMFormInputCell" class="headerlink" title="2. LMFormInputCell"></a>2. LMFormInputCell</h3><p>è¾“å…¥Cell:å¯ä»¥ç¼–è¾‘ï¼Œå¯ä»¥å¯¹è¾“å…¥é•¿åº¦é™åˆ¶ï¼Œè¾“å…¥çš„textæ›´æ–°ä¸ºmodelçš„valueã€‚</p><pre><code class="hljs mel">- (void)textDidChanged:(UITextField *)<span class="hljs-keyword">textField</span>&#123;    self.model.value = <span class="hljs-keyword">textField</span>.<span class="hljs-keyword">text</span>;    <span class="hljs-keyword">if</span> (self.model.valueDidChangedBlock)    &#123;        self.model.valueDidChangedBlock(<span class="hljs-keyword">textField</span>.<span class="hljs-keyword">text</span>);    &#125;&#125;</code></pre><h3 id="3-LMFormSelectorCell"><a href="#3-LMFormSelectorCell" class="headerlink" title="3. LMFormSelectorCell"></a>3. LMFormSelectorCell</h3><p>é€‰æ‹©å™¨Cell:å¯ä»¥é€‰æ‹©å¯¹åº”çš„item,éœ€è¦é…ç½®æ•°æ®<code>NSArray&lt;NSString *&gt; *selectList</code>,ç‚¹å‡»cellåº•éƒ¨å¼¹çª—pickerView</p><pre><code class="hljs ruby">- (void)tapSelectedAction&#123;    LMDefaultPickerView *pickView = [[LMDefaultPickerView alloc] <span class="hljs-symbol">initWithDataArray:</span><span class="hljs-keyword">self</span>.model.selectList];    @weakify(<span class="hljs-keyword">self</span>)    [LMPopupView <span class="hljs-symbol">showPopupViewWithPickView:</span>pickView <span class="hljs-symbol">title:</span><span class="hljs-keyword">self</span>.model.placeholder <span class="hljs-symbol">confirmBlock:</span>^&#123;        @strongify(<span class="hljs-keyword">self</span>)        NSString *text = <span class="hljs-keyword">self</span>.model.selectList[pickView.selectIndex];        <span class="hljs-keyword">self</span>.model.value = text;        <span class="hljs-keyword">self</span>.textField.text = text;        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span>.model.valueDidChangedBlock)        &#123;            <span class="hljs-keyword">self</span>.model.valueDidChangedBlock(text);        &#125;    &#125; <span class="hljs-symbol">cancelBlock:</span>^&#123;            &#125;];&#125;</code></pre><h3 id="4-LMDateCell"><a href="#4-LMDateCell" class="headerlink" title="4. LMDateCell"></a>4. LMDateCell</h3><p>é€‰æ‹©æ—¥æœŸCellï¼šä¸é€‰æ‹©cellç±»ä¼¼ï¼Œåº•éƒ¨å¼¹çª—datePickerViewã€‚ç›®å‰åªæ”¯æŒå¹´æœˆæ—¥ã€‚</p><pre><code class="hljs objectivec">- (<span class="hljs-keyword">void</span>)tapSelectedAction&#123;    @weakify(<span class="hljs-keyword">self</span>)    [LMPopupView showPopupViewWithPickView:<span class="hljs-keyword">self</span>.datePicker title:<span class="hljs-keyword">self</span>.model.placeholder confirmBlock:^&#123;        @strongify(<span class="hljs-keyword">self</span>)        <span class="hljs-built_in">NSDate</span> *date = <span class="hljs-keyword">self</span>.datePicker.date;        <span class="hljs-built_in">NSDateFormatter</span> *formatter = [[<span class="hljs-built_in">NSDateFormatter</span> alloc] init];        [formatter setDateFormat:<span class="hljs-keyword">self</span>.model.dateFormat ?: <span class="hljs-string">@&quot;yyyy-MM-dd&quot;</span>];        <span class="hljs-built_in">NSString</span> *text = [formatter stringFromDate:date];        <span class="hljs-keyword">self</span>.model.value = text;        <span class="hljs-keyword">self</span>.textField.text = text;    &#125; cancelBlock:^&#123;            &#125;];&#125;</code></pre><h3 id="5-LMFormAddressInputCell"><a href="#5-LMFormAddressInputCell" class="headerlink" title="5. LMFormAddressInputCell"></a>5. LMFormAddressInputCell</h3><p>åœ°å€è¾“å…¥cellï¼šä¸»è¦ç”¨æ¥è¾“å…¥è¾ƒå¤šæ•°å­—çš„ä¿¡æ¯ï¼Œåˆ†ä¸¤è¡Œæ˜¾ç¤ºã€‚</p><h3 id="6-è‡ªå®šä¹‰cell"><a href="#6-è‡ªå®šä¹‰cell" class="headerlink" title="6.è‡ªå®šä¹‰cell"></a>6.è‡ªå®šä¹‰cell</h3><h4 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h4><p>LMForm æ”¯æŒcellçš„å®Œå…¨è‡ªå®šä¹‰ï¼Œåˆ›å»ºçš„è‡ªå®šä¹‰celléœ€è¦éµå¾ªåè®®<code>LMFormCellProtocol</code>ï¼Œ<br>åè®®çš„æ–¹æ³•å¿…é¡»å®ç°ï¼Œåœ¨è‡ªå®šä¹‰çš„cellä¸­å®ç°é…ç½®æ•°æ®ã€‚å¦‚æœLMFormModelä¸­çš„å±æ€§ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥åˆ›å»ºLMFormModelåˆ†ç±»æ·»åŠ æˆ–è€…ç»§æ‰¿ã€‚ä¸ªäººæ¯”è¾ƒæ¨èåˆ†ç±»çš„åšæ³•ã€‚</p><pre><code class="hljs groovy"><span class="hljs-comment">/** æ ¹æ®model é…ç½®å¯¹åº”çš„cell  */</span>- (<span class="hljs-keyword">void</span>)<span class="hljs-attr">configModel:</span>(LMFormModel *)model;</code></pre><h4 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h4><p>LMForm ç»´æŠ¤ä¸€å¼ æ³¨å†Œè¡¨å»ºç«‹keyä¸cellClassçš„ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œå•ä¾‹<code>LMFormTypeManager</code>ä¸­çš„<code>keyCellTypes</code>å°±æ˜¯è¿™ä¸ªæ³¨å†Œè¡¨ã€‚æ³¨å†Œæ–¹æ³•ä¸º</p><pre><code class="hljs vbnet">/** è‡ªå®šä¹‰cellæ—¶æ³¨å†Œæ–¹æ³•ï¼ŒåŒä¸€ç§cellåªéœ€è¦æ³¨å†Œä¸€æ¬¡ã€‚cls éœ€ç»§æ‰¿UITableViewCell @param cls cell <span class="hljs-keyword">class</span> @param <span class="hljs-keyword">key</span> <span class="hljs-keyword">key</span> */- (void)registerCellClass:(<span class="hljs-keyword">Class</span>)cls forKey:(NSString *)<span class="hljs-keyword">key</span>;</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯æ³¨å†Œè¡¨æ˜¯ä¸ªå­—å…¸ï¼Œ<strong>keyçš„å®šä¹‰ä¸èƒ½é‡å¤</strong>ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Macå¸¸ç”¨å·¥å…·</title>
    <link href="/2019/03/19/Mac%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    <url>/2019/03/19/Mac%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Mac OS Xç³»ç»Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œè®°å½•ä¸€ä¸‹å¼€å‘ä¸­ä¼˜ç§€çš„å·¥å…·ã€‚</p><a id="more"></a><h4 id="licecap"><a href="#licecap" class="headerlink" title="licecap"></a>licecap</h4><p>gifå½•åˆ¶è½¯ä»¶</p><h4 id="Beyond-Compare"><a href="#Beyond-Compare" class="headerlink" title="Beyond Compare"></a>Beyond Compare</h4><p>æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶</p><h4 id="charles"><a href="#charles" class="headerlink" title="charles"></a>charles</h4><p>æŠ“åŒ…å·¥å…·</p><h4 id="XMind-MindNote"><a href="#XMind-MindNote" class="headerlink" title="XMind MindNote"></a>XMind MindNote</h4><p>æ€ç»´å¯¼å›¾ </p><h4 id="starUML"><a href="#starUML" class="headerlink" title="starUML"></a>starUML</h4><p>æµç¨‹å›¾ï¼Œæ—¶åºå›¾</p><h4 id="XMAPP"><a href="#XMAPP" class="headerlink" title="XMAPP"></a>XMAPP</h4><p>å»ºç«‹æœ¬åœ°æœåŠ¡å™¨</p><h4 id="foxmail"><a href="#foxmail" class="headerlink" title="foxmail"></a>foxmail</h4><p>é‚®ç®±</p><h4 id="sublime"><a href="#sublime" class="headerlink" title="sublime"></a>sublime</h4><p>æ–‡æœ¬ç¼–è¾‘å™¨</p><h4 id="æœ‰é“äº‘ç¬”è®°"><a href="#æœ‰é“äº‘ç¬”è®°" class="headerlink" title="æœ‰é“äº‘ç¬”è®°"></a>æœ‰é“äº‘ç¬”è®°</h4><p>è®°å½•</p><h4 id="iTools"><a href="#iTools" class="headerlink" title="iTools"></a>iTools</h4><p>æŸ¥è¯¢æ‰‹æœºä¿¡æ¯ï¼Œä¸Macå±å¹•å®æ—¶å…±äº«ã€‚</p><h4 id="WebStorm"><a href="#WebStorm" class="headerlink" title="WebStorm"></a>WebStorm</h4><p>Material Theme ä¸»é¢˜</p><h4 id="SourceTree"><a href="#SourceTree" class="headerlink" title="SourceTree"></a>SourceTree</h4><p>ä»£ç ç®¡ç†</p><h4 id="Alfred"><a href="#Alfred" class="headerlink" title="Alfred"></a>Alfred</h4><p>å¿«é€Ÿæ£€ç´¢Macä¸­çš„ç¨‹åºï¼Œèµ„æºã€‚</p><h4 id="Postman"><a href="#Postman" class="headerlink" title="Postman"></a>Postman</h4><p>http è¯·æ±‚</p><h4 id="ç¿»å¢™"><a href="#ç¿»å¢™" class="headerlink" title="ç¿»å¢™"></a>ç¿»å¢™</h4><p>ShadowsocksX-NG<br>V2ray</p><h4 id="iOS-å´©æºƒè§£æå·¥å…·"><a href="#iOS-å´©æºƒè§£æå·¥å…·" class="headerlink" title="iOS å´©æºƒè§£æå·¥å…·"></a>iOS å´©æºƒè§£æå·¥å…·</h4><p>dSYMTools</p><h4 id="iOS-åˆ‡å›¾app-icon-launch"><a href="#iOS-åˆ‡å›¾app-icon-launch" class="headerlink" title="iOS åˆ‡å›¾app icon launch"></a>iOS åˆ‡å›¾app icon launch</h4><p>iconizer</p><h4 id="markdown-ä¹¦å†™å·¥å…·"><a href="#markdown-ä¹¦å†™å·¥å…·" class="headerlink" title="markdown ä¹¦å†™å·¥å…·"></a>markdown ä¹¦å†™å·¥å…·</h4><p>MWeb Typora</p><h3 id="ä¸‹è½½å·¥å…·"><a href="#ä¸‹è½½å·¥å…·" class="headerlink" title="ä¸‹è½½å·¥å…·"></a>ä¸‹è½½å·¥å…·</h3><p>Motrix</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>iOS-æ¶ˆæ¯è½¬å‘æœºåˆ¶</title>
    <link href="/2018/06/27/iOS-%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91%E6%9C%BA%E5%88%B6/"/>
    <url>/2018/06/27/iOS-%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91%E6%9C%BA%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<blockquote><p>iOSå¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°è¿™æ ·çš„æŠ¥é”™ï¼šunrecognized selector sent to instance ** åŸå› å°±æ˜¯è°ƒç”¨ä¸€ä¸ªè¯¥å¯¹è±¡æ²¡æœ‰å®ç°çš„æ–¹æ³•ã€‚ç”¨OCæ¶ˆæ¯æœºåˆ¶æ¥è¯´å°±æ˜¯ï¼šæ¶ˆæ¯çš„æ¥æ”¶è€…ä¸è¿‡åˆ°å¯¹åº”çš„selectorï¼Œè¿™æ ·å°±å¯åŠ¨äº†æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç åœ¨æ¶ˆæ¯è½¬å‘çš„è¿‡ç¨‹ä¸­å‘Šè¯‰å¯¹è±¡åº”è¯¥å¦‚ä½•å¤„ç†æœªçŸ¥çš„æ¶ˆæ¯ï¼Œé»˜è®¤å®ç°æ˜¯æŠ›å‡ºä¸‹é¢çš„å¼‚å¸¸</p></blockquote><a id="more"></a><h3 id="æ¶ˆæ¯å‘é€"><a href="#æ¶ˆæ¯å‘é€" class="headerlink" title="æ¶ˆæ¯å‘é€"></a>æ¶ˆæ¯å‘é€</h3><p>ç»™ä¸€ä¸ªå¯¹è±¡å‘é€ä¸€æ¡æ¶ˆæ¯ï¼š</p><pre><code class="hljs reasonml"><span class="hljs-literal">[<span class="hljs-identifier">obj</span> <span class="hljs-identifier">messageName</span>:<span class="hljs-identifier">parameter</span>]</span> -&gt; objc<span class="hljs-constructor">_msgSend(<span class="hljs-params">obj</span>,SEL, <span class="hljs-params">parameter</span>)</span></code></pre><ol><li>é€šè¿‡ NSObject çš„ isa æŒ‡é’ˆæ‰¾åˆ°å¯¹åº”çš„ Class</li><li>åœ¨ Class çš„æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ selector</li><li>å¦‚æœåœ¨å½“å‰ Class ä¸­æœªèƒ½æ‰¾åˆ° selector åˆ™å¾€çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­ç»§ç»­æŸ¥æ‰¾</li><li>å¦‚æœèƒ½æ‰¾åˆ°å¯¹åº”çš„ selector åˆ™å»æ‰§è¡Œå¯¹è±¡çš„æ–¹æ³•å®ç°ï¼ˆIMPï¼‰</li><li>å¦‚æœè¿˜æ˜¯æ²¡æ‰¾åˆ°å°±è¦å¼€å§‹è¿›å…¥åŠ¨æ€æ–¹æ³•è§£æå’Œæ¶ˆæ¯è½¬å‘</li></ol><p>åœ¨ä¸Šè¿°æµç¨‹ä¸­å¦‚æœä¸èƒ½æ‰¾å¯¹å¯¹åº”çš„ selector æ—¶ï¼Œè¿™æ—¶å€™å°±ä¼šè¿›å…¥æ¶ˆæ¯è½¬å‘æœºåˆ¶ã€‚æ¶ˆæ¯è½¬å‘æœºåˆ¶å¯åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œåœ¨è¿™ä¸¤ä¸ªé˜¶æ®µä¸­ï¼Œæœ‰ 3 æ¬¡æœºä¼šæ¥å¤„ç†ä¹‹å‰æœªèƒ½å¤„ç† selectorï¼Œè¶Šå¾€åæ‰€èŠ±è´¹çš„ä»£ä»·å°†è¶Šå¤§ï¼Œå¤„ç†çš„çµæ´»ç¨‹åº¦ä¹Ÿå°±è¶Šé«˜ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/MaricleZhang/reasource/blob/master/message_forward.png?raw=true" alt="messageforward.png"></p><h3 id="åŠ¨æ€ç‰¹æ€§ï¼šæ–¹æ³•è§£æå’Œæ¶ˆæ¯è½¬å‘"><a href="#åŠ¨æ€ç‰¹æ€§ï¼šæ–¹æ³•è§£æå’Œæ¶ˆæ¯è½¬å‘" class="headerlink" title="åŠ¨æ€ç‰¹æ€§ï¼šæ–¹æ³•è§£æå’Œæ¶ˆæ¯è½¬å‘"></a>åŠ¨æ€ç‰¹æ€§ï¼šæ–¹æ³•è§£æå’Œæ¶ˆæ¯è½¬å‘</h3><h4 id="åŠ¨æ€æ–¹æ³•è§£æé˜¶æ®µ"><a href="#åŠ¨æ€æ–¹æ³•è§£æé˜¶æ®µ" class="headerlink" title="åŠ¨æ€æ–¹æ³•è§£æé˜¶æ®µ"></a>åŠ¨æ€æ–¹æ³•è§£æé˜¶æ®µ</h4><p>åœ¨è¯¥é˜¶æ®µä¸­ï¼Œå¯ä»¥åŠ¨æ€çš„ä¸ºç±»æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œä»è€Œè®©åŠ¨æ€æ·»åŠ çš„æ–¹æ³•æ¥å¤„ç†ä¹‹å‰æœªèƒ½å¤„ç†çš„æ¶ˆæ¯ã€‚å¯é‡å†™ç±»ä»¥ä¸‹æ–¹æ³•ï¼š</p><pre><code class="hljs css">+ (<span class="hljs-selector-tag">BOOL</span>)<span class="hljs-selector-tag">resolveInstanceMethod</span><span class="hljs-selector-pseudo">:(SEL)sel</span></code></pre><p>å¦‚æœæ˜¯ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯é‡å†™ä»¥ä¸‹æ–¹æ³•ï¼š</p><pre><code class="hljs gcode">+ <span class="hljs-comment">(BOOL)</span>resolveClassMethod:<span class="hljs-comment">(SEL)</span>sel</code></pre><p>SEL å°±æ˜¯æœªèƒ½å¤„ç†çš„ selectorï¼Œè¿”å›å€¼ä¸º BOOL è¡¨ç¤ºæ˜¯å¦å¢åŠ äº†æ–°çš„æ–¹æ³•æ¥å¤„ç†è¯¥ selector</p><h4 id="å¤‡æ´æ¥æ”¶é˜¶æ®µ"><a href="#å¤‡æ´æ¥æ”¶é˜¶æ®µ" class="headerlink" title="å¤‡æ´æ¥æ”¶é˜¶æ®µ"></a>å¤‡æ´æ¥æ”¶é˜¶æ®µ</h4><p>åœ¨è¯¥é˜¶æ®µä¸­æˆ‘ä»¬å¯ä»¥å°†æœªçŸ¥çš„ selector è½¬å‘ç»™å…¶ä»–å¯¹è±¡æ¥å¤„ç†ã€‚è¿è¡Œæ—¶æä¾›ä¸¤æ¬¡æœºä¼šï¼Œæ¥åšæ¶ˆæ¯çš„è½¬å‘ï¼Œç¬¬ä¸€æ¬¡æ˜¯é‡å†™ä»¥ä¸‹æ–¹æ³•ï¼š</p><pre><code class="hljs erlang">- <span class="hljs-params">(id)</span>forwardingTargetForSelector:<span class="hljs-params">(SEL)</span>aSelector</code></pre><h4 id="å®Œæ•´æ¶ˆæ¯è½¬å‘"><a href="#å®Œæ•´æ¶ˆæ¯è½¬å‘" class="headerlink" title="å®Œæ•´æ¶ˆæ¯è½¬å‘"></a>å®Œæ•´æ¶ˆæ¯è½¬å‘</h4><p>å¦‚æœä¸é‡å†™è¯¥æ–¹æ³•ï¼Œè¿è¡Œæ—¶å°†æŠŠæ–¹æ³•è°ƒç”¨çš„æ‰€æœ‰ç»†èŠ‚å°è£…åˆ° NSInvocation å¯¹è±¡ä¸­ï¼Œè¿›å…¥å®Œæ•´çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ä¸­ï¼Œè¿è¡Œæ—¶å°†ç»§ç»­è°ƒç”¨ä¸€ä¸‹æ–¹æ³•æ¥è¿›è¡Œæ¶ˆæ¯çš„æ´¾å‘ï¼š</p><pre><code class="hljs erlang">- <span class="hljs-params">(NSMethodSignature *)</span>methodSignatureForSelector:<span class="hljs-params">(SEL)</span>aSelector- <span class="hljs-params">(void)</span>forwardInvocation:<span class="hljs-params">(NSInvocation *)</span>anInvocation</code></pre><p>æ–¹æ³•ä¸­çš„ NSInvocation å‚æ•°ï¼ŒåŒ…å«äº†æ‰€æœ‰æ–¹æ³•è°ƒç”¨çš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬ selector/target/å‚æ•° ç­‰ï¼Œé‡å†™è¯¥æ–¹æ³•åæˆ‘ä»¬å¯ä»¥å°† anInvocation è½¬å‘ç»™å¤šä¸ªå¯¹è±¡æ¥å¤„ç†è¯¥æ¶ˆæ¯ã€‚åœ¨è¯¥é˜¶æ®µæˆ‘ä»¬å¯ä»¥ç”¨æ¥å®ç° â€œå¤šé‡ç»§æ‰¿â€ æˆ–è€…å¤šé‡ä»£ç†ç­‰ã€‚</p><p>å¦‚æœåœ¨ä¸¤ä¸ªé˜¶æ®µéƒ½ä¸åšä»»ä½•å¤„ç†çš„è¯ï¼Œè¿è¡Œæ—¶å°†ä¼šæŠŠ selector äº¤ç”± doesNotRecognizeSelector æ–¹æ³•æ¥å¤„ç†ï¼Œä»è€ŒæŠ›å‡ºå¼‚å¸¸å¯¼è‡´ Crash </p><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><h4 id="å´©æºƒçš„è§„é¿"><a href="#å´©æºƒçš„è§„é¿" class="headerlink" title="å´©æºƒçš„è§„é¿"></a>å´©æºƒçš„è§„é¿</h4><p>åˆ›å»º <code>NSObject+CashHandle</code>çš„åˆ†</p><pre><code class="hljs objectivec">- (<span class="hljs-built_in">NSMethodSignature</span> *)methodSignatureForSelector:(SEL)aSelector&#123;    <span class="hljs-comment">//æ–¹æ³•ç­¾å</span>    <span class="hljs-keyword">return</span> [<span class="hljs-built_in">NSMethodSignature</span> signatureWithObjCTypes:<span class="hljs-string">&quot;v@:@&quot;</span>];&#125;- (<span class="hljs-keyword">void</span>)forwardInvocation:(<span class="hljs-built_in">NSInvocation</span> *)anInvocation&#123;    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@&quot;NSObject+CrashLogHandle---åœ¨ç±»:%@ä¸­ æœªå®ç°è¯¥æ–¹æ³•:%@&quot;</span>,<span class="hljs-built_in">NSStringFromClass</span>([anInvocation.target <span class="hljs-keyword">class</span>]),<span class="hljs-built_in">NSStringFromSelector</span>(anInvocation.selector));&#125;</code></pre><p><a href="https://github.com/MaricleZhang/MessageForwardingDemo.git">Demo</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Pod ç§æœ‰åº“çš„åˆ›å»ºåŠä½¿ç”¨</title>
    <link href="/2018/02/12/Pod-%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
    <url>/2018/02/12/Pod-%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>CocoaPodsæ˜¯iOSé¡¹ç›®çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨å®ƒå¯ä»¥æ–¹ä¾¿çš„ç®¡ç†å’Œæ›´æ–°é¡¹ç›®ä¸­æ‰€ä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨çš„æ˜¯å…¬æœ‰åº“ï¼Œä»£ç å­˜æ”¾åœ¨Githubä¸Šã€‚ä¸ªäººæˆ–å…¬å¸åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šç§¯ç´¯å¾ˆå¤šå¯ä»¥å¤ç”¨çš„ä»£ç åŒ…ï¼Œæœ‰äº›æˆ‘ä»¬ä¸æƒ³å¼€æºï¼Œåˆæƒ³åƒå¼€æºåº“ä¸€æ ·åœ¨CocoaPodsä¸­ç®¡ç†å®ƒä»¬ï¼Œé‚£ä¹ˆé€šè¿‡ç§æœ‰åº“æ¥ç®¡ç†å°±å¾ˆå¿…è¦ã€‚</p><a id="more"></a><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>åœ¨åˆ›å»ºç§æœ‰åº“ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦ç†è§£ç§æœ‰åº“çš„åŸç†ï¼Œ<br><img src="https://github.com/MaricleZhang/reasource/blob/master/pod_spec_icon.png?raw=true" alt="podfileã€ç´¢å¼•åº“å’Œä»£ç åº“å…³ç³»å›¾.png"></p><p>Podfile:å·¥ç¨‹çš„ä¾èµ–æè¿°æ–‡ä»¶ã€‚<br>Spec:  è¯¥ä»“åº“å­˜æ”¾ç´¢å¼•æè¿°æ–‡ä»¶.podspecï¼ŒCocoaPodsé€šè¿‡è¯¥æ–‡ä»¶å¯¹ä½ çœŸæ­£å­˜å‚¨ä»£ç å·¥ç¨‹çš„ Git ä»“åº“è¿›è¡Œç´¢å¼•ä¸ä¸‹è½½,ä¸‹é¢ä¼šæœ‰å¯¹podspecçš„è¯¦ç»†ä»‹ç»ã€‚é€šè¿‡specåº“æ¥æ§åˆ¶podç§æœ‰åº“çš„ç‰ˆæœ¬ã€‚</p><p>Lib : ä½ ä¸Šä¼ åˆ°è¿œç¨‹Gitä»“åº“çš„ä»£ç å·¥ç¨‹ï¼Œå°†æ¥ç”¨äºå¼€æºå…±äº«æˆ–åˆ™ç§æœ‰</p><p>CocoaPods æ ¹æ®podfileä¸­çš„åº“çš„åç§°ï¼Œé€šè¿‡specç´¢å¼•åº“ï¼Œæ¥æ‰¾åˆ°çœŸæ­£çš„ä»£ç åº“ã€‚è¿™é‡Œæœ‰åŒå­¦å¯èƒ½è¦é—®ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªä»“åº“å‘¢ï¼Œæˆ‘çš„ç†è§£æ˜¯ä¸ºäº†å¿«é€Ÿæ£€ç´¢å’Œç‰ˆæœ¬æ§åˆ¶ã€‚å¦‚æœæ²¡æœ‰specç´¢å¼•åº“ï¼Œæˆ‘ä»¬æ¯æ¬¡pod updateçš„æ—¶å€™éƒ½éœ€è¦åœ¨GitHubæ‰€æœ‰çš„ä»£ç åº“ä¸­æ£€ç´¢ã€‚æ˜¾ç„¶æ•ˆç‡å¾ˆä½ã€‚</p><h2 id="Podç§æœ‰åº“çš„åˆ›å»ºæ­¥éª¤"><a href="#Podç§æœ‰åº“çš„åˆ›å»ºæ­¥éª¤" class="headerlink" title="Podç§æœ‰åº“çš„åˆ›å»ºæ­¥éª¤"></a>Podç§æœ‰åº“çš„åˆ›å»ºæ­¥éª¤</h2><ol><li>åˆ›å»ºä¸¤ä¸ªä»“åº“ï¼šç´¢å¼•åº“å’Œä»£ç ä»“åº“ã€‚</li><li>åˆ›å»ºå¹¶è®¾ç½®æœ¬åœ°ç§æœ‰Spec Repoã€‚</li><li>åˆ›å»ºPodæ‰€å¯¹åº”çš„podspecæ–‡ä»¶ã€‚</li><li>æœ¬åœ°æµ‹è¯•é…ç½®å¥½çš„podspecæ–‡ä»¶ã€‚</li><li>å‘ç§æœ‰çš„Spec Repoä¸­æäº¤podspecã€‚</li></ol><h3 id="åˆ›å»ºä¸¤ä¸ªä»“åº“ï¼šç´¢å¼•åº“å’Œä»£ç ä»“åº“"><a href="#åˆ›å»ºä¸¤ä¸ªä»“åº“ï¼šç´¢å¼•åº“å’Œä»£ç ä»“åº“" class="headerlink" title="åˆ›å»ºä¸¤ä¸ªä»“åº“ï¼šç´¢å¼•åº“å’Œä»£ç ä»“åº“"></a>åˆ›å»ºä¸¤ä¸ªä»“åº“ï¼šç´¢å¼•åº“å’Œä»£ç ä»“åº“</h3><p>åœ¨githubä¸Šåˆ›å»ºç´¢å¼•åº“ <strong><a href="https://github.com/MaricleZhang/ZJMaricleSpec">ZJMaricleSpec</a>**å’Œä»£ç åº“</strong><a href="https://github.com/MaricleZhang/ZJMaricle">ZJMaricle</a>**</p><h3 id="åˆ›å»ºå¹¶è®¾ç½®æœ¬åœ°ç§æœ‰Spec-Repo"><a href="#åˆ›å»ºå¹¶è®¾ç½®æœ¬åœ°ç§æœ‰Spec-Repo" class="headerlink" title="åˆ›å»ºå¹¶è®¾ç½®æœ¬åœ°ç§æœ‰Spec Repo"></a>åˆ›å»ºå¹¶è®¾ç½®æœ¬åœ°ç§æœ‰Spec Repo</h3><p>ä¸¤ä¸ªä»“åº“åˆ›å»ºå®Œæˆååœ¨Terminalä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre><code class="hljs awk"> <span class="hljs-comment"># pod repo add [Private Repo Name] [GitHub HTTPS clone URL]</span>$ pod repo add ZJMaricleSpec https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/MaricleZhang/</span>ZJMaricleSpec.git</code></pre><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯è¿™é‡Œçš„URLæ˜¯Specç´¢å¼•åº“çš„åœ°å€ï¼Œå¦‚æœå†™æˆä»£ç åº“çš„åœ°å€å°±ä¼šå‡ºç°</p><pre><code class="hljs awk">[!] An unexpected version directory Assets was encountered <span class="hljs-keyword">for</span> the <span class="hljs-regexp">/Users/</span>zhangjian<span class="hljs-regexp">/.cocoapods/</span>repos<span class="hljs-regexp">/mariclezhang/</span>YTVestSDK Pod <span class="hljs-keyword">in</span> the YTVestSDK repository.</code></pre><p>æ‰§è¡Œå®Œæˆå</p><pre><code class="hljs arcade">$ cd ~<span class="hljs-regexp">/.cocoapods/</span>repos</code></pre><p>å¦‚æœå­˜åœ¨<code>ZJMaricleSpec</code>åˆ™è¯´æ˜æœ¬åœ°<code>repo Spec</code> åˆ›å»ºæˆåŠŸ</p><h3 id="åˆ›å»ºPodæ‰€å¯¹åº”çš„podspecæ–‡ä»¶"><a href="#åˆ›å»ºPodæ‰€å¯¹åº”çš„podspecæ–‡ä»¶" class="headerlink" title="åˆ›å»ºPodæ‰€å¯¹åº”çš„podspecæ–‡ä»¶"></a>åˆ›å»ºPodæ‰€å¯¹åº”çš„podspecæ–‡ä»¶</h3><p>  cd åˆ°è¦åˆ›å»ºé¡¹ç›®çš„ç›®å½•ç„¶åæ‰§è¡Œ</p><pre><code class="hljs crystal">$ pod <span class="hljs-class"><span class="hljs-keyword">lib</span> <span class="hljs-title">create</span> <span class="hljs-title">ZJMaricle</span></span></code></pre><p>ç„¶åä¼šé—®ä¸€äº›é—®é¢˜</p><pre><code class="hljs sql">What language <span class="hljs-keyword">do</span> you want <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span>?? [ Swift / ObjC ] &gt; Objc//è¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ï¼Œæœ€å¥½å¸¦ä¸Šdemoæ–¹ä¾¿æˆ‘ä»¬ä»¥åçš„ä»£ç è°ƒè¯•Would you <span class="hljs-keyword">like</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">include</span> a demo application <span class="hljs-keyword">with</span> your <span class="hljs-keyword">library</span>? [ Yes / <span class="hljs-keyword">No</span> ] &gt; YesWhich testing frameworks will you <span class="hljs-keyword">use</span>? [ Specta / Kiwi / <span class="hljs-keyword">None</span> ] &gt; <span class="hljs-keyword">None</span>Would you <span class="hljs-keyword">like</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">do</span> <span class="hljs-keyword">view</span> based testing? [ Yes / <span class="hljs-keyword">No</span> ] &gt; YesWhat <span class="hljs-keyword">is</span> your <span class="hljs-keyword">class</span> prefix? &gt; ZJ</code></pre><p>é—®å®Œè¿™4ä¸ªé—®é¢˜ä»–ä¼šè‡ªåŠ¨æ‰§è¡Œpod installå‘½ä»¤åˆ›å»ºé¡¹ç›®å¹¶ç”Ÿæˆä¾èµ–ã€‚<br>ä¸‹é¢æ˜¯ç”Ÿæˆçš„æ–‡ä»¶ç›®å½•åŠä»‹ç»</p><pre><code class="hljs reasonml">$ tree ZJMaricle -L <span class="hljs-number">2</span>ZJMaricleâ”œâ”€â”€ Example                                            #demo â”‚Â Â  â”œâ”€â”€ Podfile                                        #demo çš„ä¾èµ–æè¿°æ–‡ä»¶â”‚Â Â  â”œâ”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Podfile</span>.</span></span>lockâ”‚Â Â  â”œâ”€â”€ Pods                                           #demo çš„ä¾èµ–æ–‡ä»¶â”‚Â Â  â”œâ”€â”€ Tests                                           â”‚Â Â  â”œâ”€â”€ ZJMaricleâ”‚Â Â  â”œâ”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ZJMaricle</span>.</span></span>xcodeprojâ”‚Â Â  â””â”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ZJMaricle</span>.</span></span>xcworkspaceâ”œâ”€â”€ LICENSEâ”œâ”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">README</span>.</span></span>mdâ”œâ”€â”€ ZJMaricleâ”‚Â Â  â”œâ”€â”€ Assets                                         #èµ„æºæ–‡ä»¶â”‚Â Â  â””â”€â”€ Classes                                        #ç±»æ–‡ä»¶â”œâ”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ZJMaricle</span>.</span></span>podspec                                  #podspec podåº“çš„æè¿°æ–‡ä»¶â””â”€â”€ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">_Pods</span>.</span></span>xcodeproj -&gt; Example/Pods/<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Pods</span>.</span></span>xcodeproj<span class="hljs-number">10</span> directories, <span class="hljs-number">5</span> files</code></pre><p>æ¥ä¸‹æ¥æŠŠåº“æ–‡ä»¶æ·»åŠ åˆ°<code>ZJMaricle/Classes</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œç»ˆç«¯è¿›å…¥<code>ZJMaricle/Example</code>ä¸‹ï¼Œæ‰§è¡Œ<code>pod update</code>å‘½ä»¤,å®Œæˆåæ‰“å¼€é¡¹ç›®å·¥ç¨‹å¯ä»¥çœ‹åˆ°ï¼Œåˆšåˆšæ·»åŠ çš„ç»„ä»¶å·²ç»åœ¨Podså­å·¥ç¨‹ä¸‹Development Pods/ZJMaricleä¸­äº†ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ¯æ¬¡å‘Pods ä¸­æ·»åŠ æ–‡ä»¶æˆ–è€…podspecä¸­çš„ç‰ˆæœ¬å‡çº§éƒ½è¦æ‰§è¡Œ<code>pod update</code>å‘½ä»¤ã€‚</p><p>é…ç½®podspecæ–‡ä»¶</p><pre><code class="hljs ruby"><span class="hljs-comment">#</span><span class="hljs-comment"># Be sure to run `pod lib lint ZJMaricle.podspec&#x27; to ensure this is a</span><span class="hljs-comment"># valid spec before submitting.</span><span class="hljs-comment">#</span><span class="hljs-comment"># Any lines starting with a # are optional, but their use is encouraged</span><span class="hljs-comment"># To learn more about a Podspec see http://guides.cocoapods.org/syntax/podspec.html</span><span class="hljs-comment">#</span>Pod::Spec.new <span class="hljs-keyword">do</span> <span class="hljs-params">|s|</span>  s.name             = <span class="hljs-string">&#x27;ZJMaricle&#x27;</span>                              <span class="hljs-comment">#åç§°</span>  s.version          = <span class="hljs-string">&#x27;0.1.0&#x27;</span>                                  <span class="hljs-comment">#ç‰ˆæœ¬å·</span>  s.summary          = <span class="hljs-string">&#x27;description of ZJMaricle.&#x27;</span>              <span class="hljs-comment">#åº“çš„æè¿°</span><span class="hljs-comment"># This description is used to generate tags and improve search results.</span><span class="hljs-comment">#   * Think: What does it do? Why did you write it? What is the focus?</span><span class="hljs-comment">#   * Try to keep it short, snappy and to the point.</span><span class="hljs-comment">#   * Write the description between the DESC delimiters below.</span><span class="hljs-comment">#   * Finally, don&#x27;t worry about the indent, CocoaPods strips it!</span>  s.description      = &lt;&lt;-DESC<span class="hljs-symbol">TODO:</span> Add long description of the pod here.                       DESC  s.homepage         = <span class="hljs-string">&#x27;https://github.com/MaricleZhang/ZJMaricle.git&#x27;</span> <span class="hljs-comment">#ä¸»é¡µ,è¿™é‡Œè¦å¡«å†™å¯ä»¥è®¿é—®åˆ°çš„åœ°å€ï¼Œä¸ç„¶éªŒè¯ä¸é€šè¿‡</span>  <span class="hljs-comment"># s.screenshots     = &#x27;www.example.com/screenshots_1&#x27;, &#x27;www.example.com/screenshots_2&#x27;</span>  s.license          = &#123; <span class="hljs-symbol">:type</span> =&gt; <span class="hljs-string">&#x27;MIT&#x27;</span>, <span class="hljs-symbol">:file</span> =&gt; <span class="hljs-string">&#x27;LICENSE&#x27;</span> &#125;  s.author           = &#123; <span class="hljs-string">&#x27;929006968@qq.com&#x27;</span> =&gt; <span class="hljs-string">&#x27;jian.zhang@yuntu-inc.com&#x27;</span> &#125;  s.source           = &#123; <span class="hljs-symbol">:git</span> =&gt; <span class="hljs-string">&#x27;https://github.com/MaricleZhang/ZJMaricle.git&#x27;</span>, <span class="hljs-symbol">:tag</span> =&gt; s.version.to_s &#125;  <span class="hljs-comment">#é¡¹ç›®åœ°å€ï¼Œè¿™é‡Œä¸æ”¯æŒsshçš„åœ°å€ï¼ŒéªŒè¯ä¸é€šè¿‡ï¼Œåªæ”¯æŒHTTPå’ŒHTTPSï¼Œæœ€å¥½ä½¿ç”¨HTTPS</span>  <span class="hljs-comment"># s.social_media_url = &#x27;https://twitter.com/&lt;TWITTER_USERNAME&gt;&#x27;</span>  s.ios.deployment_target = <span class="hljs-string">&#x27;8.0&#x27;</span>  s.source_files = <span class="hljs-string">&#x27;ZJMaricle/Classes/**/*&#x27;</span>                        <span class="hljs-comment">#åº“æ–‡ä»¶</span>    <span class="hljs-comment"># s.resource_bundles = &#123;                                         #åº“èµ„æºæ–‡ä»¶</span>  <span class="hljs-comment">#   &#x27;ZJMaricle&#x27; =&gt; [&#x27;ZJMaricle/Assets/*.png&#x27;]</span>  <span class="hljs-comment"># &#125;</span>  <span class="hljs-comment"># s.public_header_files = &#x27;Pod/Classes/**/*.h&#x27;</span>  <span class="hljs-comment"># s.frameworks = &#x27;UIKit&#x27;, &#x27;MapKit&#x27;</span>  <span class="hljs-comment"># s.dependency &#x27;AFNetworking&#x27;, &#x27;~&gt; 2.3&#x27;</span><span class="hljs-keyword">end</span></code></pre><h3 id="æœ¬åœ°æµ‹è¯•é…ç½®å¥½çš„podspecæ–‡ä»¶ã€‚"><a href="#æœ¬åœ°æµ‹è¯•é…ç½®å¥½çš„podspecæ–‡ä»¶ã€‚" class="headerlink" title="æœ¬åœ°æµ‹è¯•é…ç½®å¥½çš„podspecæ–‡ä»¶ã€‚"></a>æœ¬åœ°æµ‹è¯•é…ç½®å¥½çš„podspecæ–‡ä»¶ã€‚</h3><p>ç¼–è¾‘<code>.podspec</code>å®Œæˆåæœ¬åœ°æ ¡éªŒæ˜¯å¦åˆæ ¼ï¼Œè¿™é‡Œæœ‰å¿…è¦è§£é‡Šä¸€ä¸‹<code>pod lib lint</code>æ ¡éªŒæœ¬åœ°<code>.podspec</code>æ–‡ä»¶å’Œpodåº“ä¸­çš„æ–‡ä»¶çš„åˆæ³•æ€§ï¼Œå¦‚æœä¸åˆæ³•ï¼Œåˆ™éœ€è¦ä¿®æ”¹å†æ ¡éªŒï¼Œç›´åˆ°æ ¡éªŒé€šè¿‡ã€‚å¦‚æœæœ‰è­¦å‘Šåˆ™éœ€è¦ä½¿ç”¨<code>pod lib lint --allow-warnings</code>å‘½ä»¤é€šè¿‡æ ¡éªŒã€‚</p><pre><code class="hljs crystal">$ pod <span class="hljs-class"><span class="hljs-keyword">lib</span> <span class="hljs-title">lint</span></span></code></pre><p>å½“å‡ºç°ä¸‹é¢æƒ…å†µæ—¶è¯´æ˜æœ¬åœ°æ ¡éªŒæˆåŠŸ</p><pre><code class="hljs angelscript"> -&gt; ZJMaricle (<span class="hljs-number">0.1</span><span class="hljs-number">.0</span>)ZJMaricle passed validation.</code></pre><p>æäº¤ä»£ç ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„<code>sourcetree</code>,æœ¬åœ°ä»£ç åº“ä¸è¿œç¨‹åº“å»ºç«‹è¿æ¥ï¼Œè¿™é‡Œå°±ä¸åœ¨èµ˜è¿°äº†ã€‚å¹¶ä¸”ç»™è¿œç¨‹ä»“åº“æ‰“ä¸Štagï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„tagå°±æ˜¯åˆ›å»ºç§æœ‰åº“çš„ç‰ˆæœ¬å·ï¼Œéœ€ä¸ <code>.podspec</code>æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ä¿æŒä¸€è‡´ã€‚é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼šæœ¬åœ°æ ¡éªŒæˆåŠŸååœ¨æ‰“tagï¼Œæœ¬åœ°æ ¡éªŒæˆåŠŸååœ¨æ‰“tagï¼Œæœ¬åœ°æ ¡éªŒæˆåŠŸååœ¨æ‰“tagã€‚<br><img src="https://github.com/MaricleZhang/reasource/blob/master/source_tree_tag.png?raw=true" alt="ç»™GitHubä»“åº“æ‰“ä¸Štag.png"></p><h3 id="å‘ç§æœ‰çš„Spec-Repoä¸­æäº¤podspec"><a href="#å‘ç§æœ‰çš„Spec-Repoä¸­æäº¤podspec" class="headerlink" title="å‘ç§æœ‰çš„Spec Repoä¸­æäº¤podspec"></a>å‘ç§æœ‰çš„Spec Repoä¸­æäº¤podspec</h3><p>ç¡®è®¤æœ¬åœ°æ ¡éªŒæˆåŠŸï¼Œå¹¶ä¸”æ‰“ä¸Štagåï¼Œç»ˆç«¯è¿›å…¥åˆ°<code>ZJMaricle.podspec</code>åŒä¸€ç›®å½•ä¸‹æ‰§è¡Œ</p><pre><code class="hljs avrasm">$ pod repo <span class="hljs-keyword">push</span> ZJMaricleSpec ZJMaricle.podspec  <span class="hljs-meta">#å‰é¢æ˜¯æœ¬åœ°Repoåå­— åé¢æ˜¯podspecåå­—</span></code></pre><p>å‡ºç°</p><pre><code class="hljs ocaml">$ pod repo push <span class="hljs-type">ZJMaricleSpec</span> <span class="hljs-type">ZJMaricle</span>.podspec<span class="hljs-type">Validating</span> spec -&gt; <span class="hljs-type">ZJMaricle</span> (<span class="hljs-number">0.1</span>.<span class="hljs-number">0</span>)<span class="hljs-type">Updating</span> the <span class="hljs-type">`ZJMaricleSpec&#x27;</span> repo<span class="hljs-type">Your</span> configuration specifies <span class="hljs-keyword">to</span> merge <span class="hljs-keyword">with</span> the <span class="hljs-built_in">ref</span> <span class="hljs-symbol">&#x27;refs</span>/heads/master&#x27;from the remote, but no such <span class="hljs-built_in">ref</span> was fetched.<span class="hljs-type">Adding</span> the spec <span class="hljs-keyword">to</span> the <span class="hljs-type">`ZJMaricleSpec&#x27;</span> repo - [<span class="hljs-type">Add</span>] <span class="hljs-type">ZJMaricle</span> (<span class="hljs-number">0.1</span>.<span class="hljs-number">0</span>)<span class="hljs-type">Pushing</span> the <span class="hljs-type">`ZJMaricleSpec&#x27;</span> repo</code></pre><p>åˆ°ç´¢å¼•åº“Spec Repoè¿œç«¯ä»“åº“ï¼Œä¼šå‘ç°æœ‰äº†ä¸€æ¬¡æäº¤ï¼Œè¯´æ˜podspecå·²ç»pushä¸Šå»äº†ï¼Œå¹¶ä¸”ç´¢å¼•åº“å·²ç»ä¸ä»£ç åº“å»ºç«‹äº†æœ‰æ•ˆè¿æ¥ã€‚å†åˆ°æœ¬åœ°çš„Sepc repoä¸­</p><pre><code class="hljs arcade">$ cd ~<span class="hljs-regexp">/.cocoapods/</span>repos/ZJMaricleSpec</code></pre><p>ä¼šå‘ç°ç›®å½•ç»“æ„å˜æˆ</p><pre><code class="hljs css"><span class="hljs-selector-tag">ZJMaricle</span>â””â”€â”€ 0<span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.0</span>    â””â”€â”€ <span class="hljs-selector-tag">ZJMaricle</span><span class="hljs-selector-class">.podspec</span></code></pre><p>åˆ°è¿™é‡Œpodç§æœ‰åº“çš„åˆ›å»ºå·²ç»å®Œæˆï¼Œæ€ä¹ˆæ ·æ£€éªŒæˆ‘çš„podç§æœ‰åº“æœ‰æ²¡æœ‰å»ºç«‹æˆåŠŸå‘¢ã€‚æ‰§è¡Œ<code>pod search ZJMaricle</code>å‡ºç°è¯´æ˜åˆ›å»ºæˆåŠŸã€‚</p><pre><code class="hljs awk">-&gt; ZJMaricle (<span class="hljs-number">0.1</span>.<span class="hljs-number">0</span>)   description of ZJMaricle.   pod <span class="hljs-string">&#x27;ZJMaricle&#x27;</span>, <span class="hljs-string">&#x27;~&gt; 0.1.0&#x27;</span>   - Homepage: https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/MaricleZhang/</span>ZJMaricle.git   - Source:   https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/MaricleZhang/</span>ZJMaricle.git   - Versions: <span class="hljs-number">0.1</span>.<span class="hljs-number">0</span> [ZJMaricleSpec repo](<span class="hljs-keyword">END</span>)</code></pre><p>è¿™é‡Œè®¨è®ºçš„æ˜¯podç§æœ‰åº“ï¼Œå¦‚æœå»ºç«‹å…±æœ‰åº“çš„è¯ï¼Œè¯·ä½¿ç”¨ <code>trunk</code>å·¥å…·,è¯¦ç»†è¯·å‚è€ƒ<a href="http://guides.cocoapods.org/making/getting-setup-with-trunk.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="Pod-ç§æœ‰åº“çš„ä½¿ç”¨"><a href="#Pod-ç§æœ‰åº“çš„ä½¿ç”¨" class="headerlink" title="Pod ç§æœ‰åº“çš„ä½¿ç”¨"></a>Pod ç§æœ‰åº“çš„ä½¿ç”¨</h2><h3 id="1-ç§æœ‰åº“çš„å¼•ç”¨"><a href="#1-ç§æœ‰åº“çš„å¼•ç”¨" class="headerlink" title="1. ç§æœ‰åº“çš„å¼•ç”¨"></a>1. ç§æœ‰åº“çš„å¼•ç”¨</h3><p>å½“æˆ‘ä»¬åœ¨Exampleä¸‹æ‰§è¡Œ<code>pod install</code> çš„æ—¶å€™ä¼šå‡ºç°<code>[!] Unable to find a specification for ZJMaricle </code>,Cocoapodså¹¶ä¸èƒ½æ‰¾åˆ°å¯¹åº”çš„ç§æœ‰åº“ã€‚è¿™æ˜¯å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨å…¬æœ‰åº“<a href="https://github.com/CocoaPods/Specs.git">https://github.com/CocoaPods/Specs.git</a> ä¸­æŸ¥è¯¢ï¼Œæˆ‘ä»¬çš„ç§æœ‰åº“å¹¶ä¸åœ¨è¿™é‡Œï¼Œæ‰€ä»¥å½“ç„¶æŸ¥è¯¢ä¸åˆ°ã€‚ä¸‹é¢æ˜¯è§£å†³çš„åŠæ³•ï¼Œåœ¨podfileçš„é¡¶éƒ¨æ·»åŠ </p><pre><code class="hljs bash"><span class="hljs-built_in">source</span> <span class="hljs-string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span>  <span class="hljs-comment">#å®˜æ–¹ä»“åº“çš„åœ°å€</span><span class="hljs-built_in">source</span> <span class="hljs-string">&#x27;https://github.com/MaricleZhang/ZJMaricleSpec.git&#x27;</span>  <span class="hljs-comment">#æˆ‘ä»¬è‡ªå·±çš„ç§æœ‰specä»“åº“çš„åœ°å€</span></code></pre><p>è¿™é‡Œæ·»åŠ çš„ä¸€å®šä¸ºSpecåº“çš„åœ°å€ï¼Œå¦‚æœå†™æˆä»£ç åº“åˆ™ä¼šå‡ºç°</p><pre><code class="hljs awk">[!] An unexpected version directory Assets was encountered <span class="hljs-keyword">for</span> the <span class="hljs-regexp">/Users/</span>.cocoapods<span class="hljs-regexp">/repos/m</span>ariclezhang/ZJMaricleSpec Pod <span class="hljs-keyword">in</span> the ZJMaricleSpec repository.</code></pre><h2 id="2-Podåº“çš„æ ¡éªŒ"><a href="#2-Podåº“çš„æ ¡éªŒ" class="headerlink" title="2.Podåº“çš„æ ¡éªŒ"></a>2.Podåº“çš„æ ¡éªŒ</h2><h4 id="pod-lib-lint-å’Œ-pod-spec-lint-å‘½ä»¤çš„åŒºåˆ«"><a href="#pod-lib-lint-å’Œ-pod-spec-lint-å‘½ä»¤çš„åŒºåˆ«" class="headerlink" title="pod lib lint å’Œ pod spec lint å‘½ä»¤çš„åŒºåˆ«"></a>pod lib lint å’Œ pod spec lint å‘½ä»¤çš„åŒºåˆ«</h4><p><code> pod lib lint</code>æ˜¯åªä»æœ¬åœ°éªŒè¯ä½ çš„podèƒ½å¦é€šè¿‡éªŒè¯<br> <code>pod spec lint</code>æ˜¯ä»æœ¬åœ°å’Œè¿œç¨‹éªŒè¯ä½ çš„podèƒ½å¦é€šè¿‡éªŒè¯<br>åœ¨æäº¤ä»£ç ä¹‹å‰æ‰“tagä¹‹å‰ï¼Œä½¿ç”¨pod lib lint éªŒè¯ä¸€èˆ¬ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œå¦‚æœå‡ºç°é—®é¢˜éœ€è¦éªŒè¯è¿œç¨‹çš„ä»£ç åˆ™ä½¿ç”¨<code>pod spec lint</code>æ¥éªŒè¯ã€‚<br>æœ¬åœ°æ ¡éªŒ<code>pod lib lint</code>å¦‚æœå‡ºç°</p><pre><code class="hljs routeros">[!] ZJMaricle did <span class="hljs-keyword">not</span> pass validation, due <span class="hljs-keyword">to</span> 1 <span class="hljs-builtin-name">warning</span> (but you can use `--allow-warnings` <span class="hljs-keyword">to</span> ignore it).</code></pre><p>åœ¨ä»£ç ä¸­è­¦å‘Šæ— æ³•æ¸…é™¤æ—¶ï¼Œåœ¨ææäº¤ä»£ç æ—¶ä½¿ç”¨</p><pre><code class="hljs maxima">pod repo <span class="hljs-built_in">push</span> ZJMaricle ZJMaricleSpec.podspec --allow-<span class="hljs-built_in">warnings</span></code></pre><p>å‚è€ƒæ–‡æ¡£ï¼š<br><a href="http://blog.wtlucky.com/blog/2015/02/26/create-private-podspec/">ä½¿ç”¨Cocoapodsåˆ›å»ºç§æœ‰podspec</a><br><a href="http://www.jianshu.com/p/1e5927eeb341">Cocoapodsä½¿ç”¨ç§æœ‰åº“ä¸­é‡åˆ°çš„å‘</a><br><a href="http://www.cocoachina.com/ios/20150930/13471.html">Cocoapods åº”ç”¨ç¬¬äºŒéƒ¨åˆ†-ç§æœ‰åº“ç›¸å…³</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>iOSå¸¸è§æ§ä»¶çš„å°è£…ï¼ˆäºŒï¼‰ï¼šUIAlertViewController</title>
    <link href="/2016/10/24/iOS%E5%B8%B8%E8%A7%81%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%B0%81%E8%A3%85%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AUIAlertViewController/"/>
    <url>/2016/10/24/iOS%E5%B8%B8%E8%A7%81%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%B0%81%E8%A3%85%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AUIAlertViewController/</url>
    
    <content type="html"><![CDATA[<blockquote><p>UIAlertViewControllerç±»åœ¨iOSå¼€å‘ä¸­ç»å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯ä½¿ç”¨ç³»ç»Ÿæ–¹æ³•éœ€è¦å¤ªå¤šçš„ä»£ç ï¼Œæ‰€ä»¥æˆ‘è‡ªå·±å°è£…äº†ä¸€ä¸ªç±»ã€‚åœ¨ä¸€ä¸ªblockä¸­å®ç°ç‚¹å‡»äº‹ä»¶ã€‚</p></blockquote><a id="more"></a><ul><li>UIAlertController+Category.h</li></ul><pre><code class="hljs objectivec"><span class="hljs-meta">#import <span class="hljs-meta-string">&lt;UIKit/UIKit.h&gt;</span></span><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">void</span> (^CallBackBlock)(<span class="hljs-built_in">NSInteger</span> btnIndex);<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">UIAlertController</span> (<span class="hljs-title">Category</span>)</span><span class="hljs-comment">/**</span><span class="hljs-comment"> è‡ªå®šä¹‰å°è£…çš„UIAlertControlleræ–¹æ³•</span><span class="hljs-comment"></span><span class="hljs-comment"> @param viewController       æ˜¾ç¤ºçš„vc</span><span class="hljs-comment"> @param alertControllerStyle UIAlertControllerStyle æ ·å¼</span><span class="hljs-comment"> @param title                æ ‡é¢˜</span><span class="hljs-comment"> @param message              æç¤ºä¿¡æ¯</span><span class="hljs-comment"> @param block                å›è°ƒblock</span><span class="hljs-comment"> @param cancelBtnTitle       å–æ¶ˆbuttonæ ‡é¢˜</span><span class="hljs-comment"> @param destructiveBtnTitle  çº¢è‰²çš„æŒ‰é’®</span><span class="hljs-comment"> @param otherBtnTitles       å…¶ä»–buttonæ ‡é¢˜</span><span class="hljs-comment"> */</span>+ (<span class="hljs-keyword">void</span>)showAlertCntrollerWithViewController:(<span class="hljs-built_in">UIViewController</span>*)viewController alertControllerStyle:(<span class="hljs-built_in">UIAlertControllerStyle</span>)alertControllerStyle title:(<span class="hljs-built_in">NSString</span>*)title message:(<span class="hljs-built_in">NSString</span>*)message CallBackBlock:(CallBackBlock)block cancelButtonTitle:(<span class="hljs-built_in">NSString</span> *)cancelBtnTitle                    destructiveButtonTitle:(<span class="hljs-built_in">NSString</span> *)destructiveBtnTitle                         otherButtonTitles:(<span class="hljs-built_in">NSString</span> *)otherBtnTitles,...NS_REQUIRES_NIL_TERMINATION;<span class="hljs-keyword">@end</span></code></pre><ul><li>UIAlertController+Category.h</li></ul><pre><code class="hljs objectivec"><span class="hljs-meta">#import <span class="hljs-meta-string">&quot;UIAlertController+Category.h&quot;</span></span><span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UIAlertController</span> (<span class="hljs-title">Category</span>)</span>+(<span class="hljs-keyword">void</span>)showAlertCntrollerWithViewController:(<span class="hljs-built_in">UIViewController</span> *)viewController alertControllerStyle:(<span class="hljs-built_in">UIAlertControllerStyle</span>)alertControllerStyle title:(<span class="hljs-built_in">NSString</span> *)title message:(<span class="hljs-built_in">NSString</span> *)message CallBackBlock:(CallBackBlock)block cancelButtonTitle:(<span class="hljs-built_in">NSString</span> *)cancelBtnTitle destructiveButtonTitle:(<span class="hljs-built_in">NSString</span> *)destructiveBtnTitle otherButtonTitles:(<span class="hljs-built_in">NSString</span> *)otherBtnTitles, ...&#123;    <span class="hljs-built_in">UIAlertController</span> * alertController = [<span class="hljs-built_in">UIAlertController</span> alertControllerWithTitle:title message:message preferredStyle:alertControllerStyle];    <span class="hljs-comment">//æ·»åŠ æŒ‰é’®</span>    <span class="hljs-keyword">if</span> (cancelBtnTitle.length) &#123;        <span class="hljs-built_in">UIAlertAction</span> * cancelAction = [<span class="hljs-built_in">UIAlertAction</span> actionWithTitle:cancelBtnTitle style:<span class="hljs-built_in">UIAlertActionStyleCancel</span> handler:^(<span class="hljs-built_in">UIAlertAction</span> * _Nonnull action) &#123;            block(<span class="hljs-number">0</span>);        &#125;];        [alertController addAction:cancelAction];    &#125;    <span class="hljs-keyword">if</span> (destructiveBtnTitle.length) &#123;        <span class="hljs-built_in">UIAlertAction</span> * destructiveAction = [<span class="hljs-built_in">UIAlertAction</span> actionWithTitle:destructiveBtnTitle style:<span class="hljs-built_in">UIAlertActionStyleDestructive</span> handler:^(<span class="hljs-built_in">UIAlertAction</span> * _Nonnull action) &#123;            block(<span class="hljs-number">1</span>);        &#125;];        [alertController addAction:destructiveAction];    &#125;    <span class="hljs-keyword">if</span> (otherBtnTitles.length) &#123;        <span class="hljs-built_in">UIAlertAction</span> *otherActions = [<span class="hljs-built_in">UIAlertAction</span> actionWithTitle:otherBtnTitles style:<span class="hljs-built_in">UIAlertActionStyleDefault</span> handler:^(<span class="hljs-built_in">UIAlertAction</span> *action) &#123;            (!cancelBtnTitle.length &amp;&amp; !destructiveBtnTitle.length) ? block(<span class="hljs-number">0</span>) : (((cancelBtnTitle.length &amp;&amp; !destructiveBtnTitle.length) || (!cancelBtnTitle.length &amp;&amp; destructiveBtnTitle.length)) ? block(<span class="hljs-number">1</span>) : block(<span class="hljs-number">2</span>));        &#125;];        [alertController addAction:otherActions];        <span class="hljs-comment">/**</span><span class="hljs-comment">         *  va_list : ï¼ˆ1ï¼‰é¦–å…ˆåœ¨å‡½æ•°é‡Œå®šä¹‰ä¸€å…·VA_LISTå‹çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯æŒ‡å‘å‚æ•°çš„æŒ‡é’ˆï¼›</span><span class="hljs-comment">         *            ï¼ˆ2ï¼‰ç„¶åç”¨VA_STARTå®åˆå§‹åŒ–å˜é‡åˆšå®šä¹‰çš„VA_LISTå˜é‡ï¼›</span><span class="hljs-comment">         *            ï¼ˆ3ï¼‰ç„¶åç”¨VA_ARGè¿”å›å¯å˜çš„å‚æ•°ï¼ŒVA_ARGçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä½ è¦è¿”å›çš„å‚æ•°çš„ç±»å‹ï¼ˆå¦‚æœå‡½æ•°æœ‰å¤šä¸ªå¯å˜å‚æ•°çš„ï¼Œä¾æ¬¡è°ƒç”¨VA_ARGè·å–å„ä¸ªå‚æ•°ï¼‰ï¼›</span><span class="hljs-comment">         *            ï¼ˆ4ï¼‰æœ€åç”¨VA_ENDå®ç»“æŸå¯å˜å‚æ•°çš„è·å–ã€‚</span><span class="hljs-comment">         *   va_start :è·å–å¯å˜å‚æ•°åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„åœ°å€;</span><span class="hljs-comment">         *   va_arg :è·å–å½“å‰å‚æ•°ï¼Œè¿”å›æŒ‡å®šç±»å‹å¹¶å°†æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€å‚æ•°</span><span class="hljs-comment">         *   va_end :æ¸…ç©ºva_listå¯å˜å‚æ•°åˆ—è¡¨ï¼š</span><span class="hljs-comment">         *</span><span class="hljs-comment">         *</span><span class="hljs-comment">         */</span>        va_list args;        va_start(args, otherBtnTitles);        <span class="hljs-keyword">if</span> (otherBtnTitles.length) &#123;            <span class="hljs-built_in">NSString</span> * otherString;            <span class="hljs-keyword">int</span> index = <span class="hljs-number">2</span>;            (!cancelBtnTitle.length &amp;&amp; !destructiveBtnTitle.length) ? (index = <span class="hljs-number">0</span>) : ((cancelBtnTitle.length &amp;&amp; !destructiveBtnTitle.length) || (!cancelBtnTitle.length &amp;&amp; destructiveBtnTitle.length) ? (index = <span class="hljs-number">1</span>) : (index = <span class="hljs-number">2</span>));            <span class="hljs-keyword">while</span> ((otherString = va_arg(args, <span class="hljs-built_in">NSString</span>*))) &#123;                index ++ ;                <span class="hljs-built_in">UIAlertAction</span> * otherActions = [<span class="hljs-built_in">UIAlertAction</span> actionWithTitle:otherString style:<span class="hljs-built_in">UIAlertActionStyleDefault</span> handler:^(<span class="hljs-built_in">UIAlertAction</span> * _Nonnull action) &#123;                    block(index);                &#125;];                [alertController addAction:otherActions];            &#125;        &#125;        va_end(args);    &#125;    [viewController presentViewController:alertController animated:<span class="hljs-literal">YES</span> completion:<span class="hljs-literal">nil</span>];&#125;<span class="hljs-keyword">@end</span></code></pre><p>å…¶å®ä¸»è¦çš„éš¾ç‚¹å°±æ˜¯å¾ªç¯è·å–otherButtons,ä»£ç ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œä¸è¶³ä¹‹å¤„å¸Œæœ›å¤§å®¶æŒ‡æ­£ã€‚æƒ³è¦äº†è§£æ›´å¤šæˆ–è€…ä¸‹è½½demo,è¯·è®¿é—®github:<a href="https://github.com/Maricle1/ControlsPackage.git">https://github.com/Maricle1/ControlsPackage.git</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>iOSå¸¸è§æ§ä»¶çš„å°è£…ï¼ˆä¸€ï¼‰ï¼šUIButton</title>
    <link href="/2016/10/17/iOS%E5%B8%B8%E8%A7%81%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%B0%81%E8%A3%85%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AUIButton/"/>
    <url>/2016/10/17/iOS%E5%B8%B8%E8%A7%81%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%B0%81%E8%A3%85%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AUIButton/</url>
    
    <content type="html"><![CDATA[<blockquote><p>UIButtonç±»åœ¨ä½¿ç”¨æ—¶éœ€è¦ä¸€è¡Œè¡Œçš„æ¥è®¾ç½®å±æ€§ï¼Œä»£ç è¿‡äºå†—ä½™ã€‚æ¯ä¸ªç‚¹å‡»äº‹ä»¶éƒ½è¦åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œä¸åˆ©äºé˜…è¯»ã€‚ä¸‹é¢å°±æ˜¯æˆ‘ç”¨blockå°è£…çš„UIButtonçš„åˆ†ç±»ã€‚</p></blockquote><a id="more"></a><ul><li>UIButton+Block.h</li></ul><pre><code class="hljs objectivec"> <span class="hljs-meta">#import <span class="hljs-meta-string">&lt;UIKit/UIKit.h&gt;</span></span><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">void</span>(^tapActionBlock)(<span class="hljs-built_in">UIButton</span> *button);<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">UIButton</span> (<span class="hljs-title">Block</span>)</span><span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">copy</span>)tapActionBlock actionBlock;<span class="hljs-comment">/**</span><span class="hljs-comment"> é€šè¿‡blockå¯¹buttonçš„ç‚¹å‡»äº‹ä»¶å°è£…</span><span class="hljs-comment"> </span><span class="hljs-comment"> @param frame       frame</span><span class="hljs-comment"> @param title       æ ‡é¢˜</span><span class="hljs-comment"> @param bgImageName èƒŒæ™¯å›¾ç‰‡</span><span class="hljs-comment"> @param actionBlock ç‚¹å‡»äº‹ä»¶å›è°ƒblock</span><span class="hljs-comment"> </span><span class="hljs-comment"> @return button</span><span class="hljs-comment"> */</span>+ (<span class="hljs-built_in">UIButton</span> *)createBtnFrame:(<span class="hljs-built_in">CGRect</span>)frame title:(<span class="hljs-built_in">NSString</span> *)title bgImageName:(<span class="hljs-built_in">NSString</span> *)bgImageName action:(tapActionBlock)actionBlock;<span class="hljs-keyword">@end</span></code></pre><ul><li>UIButton+Block.m</li></ul><pre><code class="hljs objectivec"><span class="hljs-meta">#import <span class="hljs-meta-string">&quot;UIButton+Block.h&quot;</span></span><span class="hljs-meta">#import <span class="hljs-meta-string">&lt;objc/runtime.h&gt;</span></span><span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UIButton</span> (<span class="hljs-title">Block</span>)</span><span class="hljs-keyword">static</span> <span class="hljs-built_in">NSString</span> *keyOfUseCategoryMethod;<span class="hljs-comment">//ç”¨åˆ†ç±»æ–¹æ³•åˆ›å»ºçš„buttonï¼Œå…³è”å¯¹è±¡çš„key</span><span class="hljs-keyword">static</span> <span class="hljs-built_in">NSString</span> *keyOfBlock;+ (<span class="hljs-built_in">UIButton</span> *)createBtnFrame:(<span class="hljs-built_in">CGRect</span>)frame title:(<span class="hljs-built_in">NSString</span> *)title bgImageName:(<span class="hljs-built_in">NSString</span> *)bgImageName action:(tapActionBlock)actionBlock&#123;        <span class="hljs-built_in">UIButton</span> *button = [<span class="hljs-built_in">UIButton</span> buttonWithType:<span class="hljs-built_in">UIButtonTypeRoundedRect</span>];    button.frame = frame;    [button setTitle:title forState:<span class="hljs-built_in">UIControlStateNormal</span>];    [button setBackgroundImage:[<span class="hljs-built_in">UIImage</span> imageNamed:bgImageName] forState:<span class="hljs-built_in">UIControlStateNormal</span>];    [button addTarget:button action:<span class="hljs-keyword">@selector</span>(tapAction:) forControlEvents:<span class="hljs-built_in">UIControlEventTouchUpInside</span>];        <span class="hljs-comment">/**</span><span class="hljs-comment">     *ç”¨runtimeä¸­çš„å‡½æ•°é€šè¿‡keyå…³è”å¯¹è±¡</span><span class="hljs-comment">     *</span><span class="hljs-comment">     *objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy)</span><span class="hljs-comment">     *id object                     è¡¨ç¤ºå…³è”è€…ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå˜é‡åç†æ‰€å½“ç„¶ä¹Ÿæ˜¯object</span><span class="hljs-comment">     *const void *key               è·å–è¢«å…³è”è€…çš„ç´¢å¼•key</span><span class="hljs-comment">     *id value                      è¢«å…³è”è€…ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªblock</span><span class="hljs-comment">     *objc_AssociationPolicy policy å…³è”æ—¶é‡‡ç”¨çš„åè®®ï¼Œæœ‰assignï¼Œretainï¼Œcopyç­‰åè®®ï¼Œä¸€èˆ¬ä½¿ç”¨OBJC_ASSOCIATION_RETAIN_NONATOMIC</span><span class="hljs-comment">     </span><span class="hljs-comment">     */</span>    objc_setAssociatedObject (button , &amp;keyOfUseCategoryMethod , actionBlock, OBJC_ASSOCIATION_COPY_NONATOMIC );        <span class="hljs-keyword">return</span> button;&#125;- (<span class="hljs-keyword">void</span>)tapAction:(<span class="hljs-built_in">UIButton</span>*)sender&#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">     * é€šè¿‡keyè·å–è¢«å…³è”å¯¹è±¡</span><span class="hljs-comment">     *objc_getAssociatedObject(id object, const void *key)</span><span class="hljs-comment">     *</span><span class="hljs-comment">     */</span>    tapActionBlock block = ( tapActionBlock )objc_getAssociatedObject (sender , &amp;keyOfUseCategoryMethod );        <span class="hljs-keyword">if</span> (block) &#123;                block(sender);            &#125;&#125;- (<span class="hljs-keyword">void</span>)setActionBlock:(tapActionBlock)actionBlock&#123;    objc_setAssociatedObject (<span class="hljs-keyword">self</span> , &amp;keyOfBlock , actionBlock, OBJC_ASSOCIATION_COPY_NONATOMIC );    &#125;- (tapActionBlock)actionBlock&#123;    <span class="hljs-keyword">return</span> objc_getAssociatedObject (<span class="hljs-keyword">self</span> , &amp;keyOfBlock );&#125;<span class="hljs-keyword">@end</span></code></pre><p>è¿™ä¸ªå°è£…çš„ä¸»è¦éš¾ç‚¹åœ¨äºç”¨runtimeå…³è”blockï¼Œä»£ç æ³¨é‡Šä¸­æœ‰è¯¦ç»†çš„è§£é‡Šï¼Œä¸è¶³ä¹‹å¤„å¸Œæœ›å¤§å®¶æŒ‡æ­£ã€‚æƒ³è¦äº†è§£æ›´å¤šæˆ–è€…ä¸‹è½½demo,è¯·è®¿é—®github:<a href="https://github.com/Maricle1/ControlsPackage.git">https://github.com/Maricle1/ControlsPackage.git</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
